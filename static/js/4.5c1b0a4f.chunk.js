(this["webpackJsonpmodest-read"]=this["webpackJsonpmodest-read"]||[]).push([[4],{30:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),i=a.n(n);function c({name:e,title:t,size:a="20px",className:n,style:c={}}){const l={grid:"M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V12H4M4,11H9V5H4V11Z",list:"M9,5V9H21V5M9,19H21V15H9M9,14H21V10H9M4,9H8V5H4M4,19H8V15H4M4,14H8V10H4V14Z",trash:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",settings:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",menu:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",close:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z","dots-vertical":"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",upload:"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z","circle-cross":"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z","circle-check":"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",bookshelf:"M9 3V18H12V3H9M12 5L16 18L19 17L15 4L12 5M5 5V18H8V5H5M3 19V21H21V19H3Z",book:"M6.012,18H21V4c0-1.104-0.896-2-2-2H6C4.794,2,3,2.799,3,5v3v6v3v2c0,2.201,1.794,3,3,3h15v-2H6.012 C5.55,19.988,5,19.805,5,19S5.55,18.012,6.012,18z M8,6h9v2H8V6z","open-book":"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z","book-question-mark":"M19,2H6A2.91,2.91,0,0,0,3,5V19a2.91,2.91,0,0,0,3,3H21V20H6a1,1,0,1,1,0-2H21V4A2,2,0,0,0,19,2ZM13.09,16h-1.8V14.2h1.8Zm2.1-6.2c-.5.6-1.3,1-1.7,1.5a2.54,2.54,0,0,0-.4,1.7h-1.8a4.52,4.52,0,0,1,.4-2.45,7.22,7.22,0,0,1,1.7-1.35c1.45-1.34,1.09-3.24-.9-3.4a1.8,1.8,0,0,0-1.8,1.8H8.89A3.6,3.6,0,0,1,12.49,4,3.48,3.48,0,0,1,15.19,9.8Z","book-check-mark":"M19,2H6A2.91,2.91,0,0,0,3,5V19a2.91,2.91,0,0,0,3,3H21V20H6a1,1,0,1,1,0-2H21V4A2,2,0,0,0,19,2ZM9.61,15.75,5,11.15,7.1,9.06l2.51,2.51,7.31-7.32L19,6.34Z","menu-down":"M7,10L12,15L17,10H7Z",reset:"M12,6V9L16,5L12,1V4A8,8 0 0,0 4,12C4,13.57 4.46,15.03 5.24,16.26L6.7,14.8C6.25,13.97 6,13 6,12A6,6 0 0,1 12,6M18.76,7.74L17.3,9.2C17.74,10.04 18,11 18,12A6,6 0 0,1 12,18V15L8,19L12,23V20A8,8 0 0,0 20,12C20,10.43 19.54,8.97 18.76,7.74Z",plus:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",minus:"M19,13H5V11H19V13Z","arrow-up":"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z","arrow-down":"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z",info:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",exit:"M19,3H5C3.89,3 3,3.89 3,5V9H5V5H19V19H5V15H3V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10.08,15.58L11.5,17L16.5,12L11.5,7L10.08,8.41L12.67,11H3V13H12.67L10.08,15.58Z"};return c={...c,width:a,height:a},i.a.createElement("svg",{viewBox:"0 0 24 24",className:n,style:c},t&&i.a.createElement("title",null,t),i.a.createElement("path",{d:l[e]}))}},31:function(e,t,a){"use strict";function n(e){document.title=e+" | ModestRead"}function i(...e){return e.join(" ").trimEnd()}async function c(e){const t=await e.getPage(1),a=document.createElement("canvas");let n=t.getViewport({scale:.4});return n.width<162?n=t.getViewport({scale:64.8/n.width}):n.height>240&&(n=t.getViewport({scale:96/n.height})),a.width=n.width,a.height=n.height,await t.render({canvasContext:a.getContext("2d"),viewport:n}).promise,a.toDataURL("image/jpeg",.8)}async function l(e,t){const a=await e.arrayBuffer();return t.getDocument(new Uint8Array(a)).promise}function s(e){const t={};return e.info.Title&&(t.title=e.info.Title),e.info.Author&&(t.author=e.info.Author),t}function r(e){const t=["B","kB","MB","GB"];let a=e,n=0;for(;n<t.length&&!(a<1e3);)a/=1e3,n+=1;return a=n>0?a.toFixed(1):Math.round(a),`${a} ${t[n]}`}a.d(t,"f",(function(){return n})),a.d(t,"a",(function(){return i})),a.d(t,"d",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return r}))},32:function(e,t,a){"use strict";var n=a(0),i=a.n(n),c=a(33),l=a.n(c);a(34);t.a=function(){return i.a.createElement("img",{src:l.a,className:"banner-image",alt:""})}},33:function(e,t,a){e.exports=a.p+"static/media/icon-text.9dc879ec.svg"},34:function(e,t,a){},35:function(e,t,a){"use strict";var n=a(0),i=a.n(n),c=(a(39),a(69));t.a=function({container:e,toggle:t,body:a,children:l}){const[s,r]=Object(n.useState)({id:Object(c.a)()}),o=Object(n.useCallback)((function({target:e}){const t=e.closest(".dropdown-container");let a=!0;(null===t||void 0===t?void 0:t.id)===s.id&&(a=!e.closest("[data-dropdown-keep]")&&(e.closest("a")||e.closest(".dropdown-btn")));a&&(d.current&&r({id:s.id,visible:!1,reveal:!1}),window.removeEventListener("click",o))}),[s.id]),d=Object(n.useRef)(!1),m=Object(n.useRef)(null);return Object(n.useEffect)(()=>(d.current=!0,()=>{d.current=!1,window.removeEventListener("click",o)}),[o]),Object(n.useEffect)(()=>{if(s.reveal){const e=document.documentElement.offsetHeight,t=m.current.getBoundingClientRect().height;r({...s,onTop:s.top+t>e,visible:!0})}},[s.reveal]),i.a.createElement("div",{id:s.id,className:"dropdown-container"+(e?" "+e.className:"")},i.a.createElement("button",{onClick:function({currentTarget:e}){let t=0;s.visible?window.removeEventListener("click",o):(window.addEventListener("click",o),t=e.getBoundingClientRect().bottom),r({id:s.id,visible:!1,reveal:!s.visible,top:t,onTop:!1})},title:t.title,className:`${t.className}${s.visible?" active":""}`},t.content),i.a.createElement("div",{ref:m,className:`dropdown${a?" "+a.className:""}${s.reveal?" reveal":""}${s.visible?" visible":""}${s.onTop?" top":""}`},l))}},36:function(e,t,a){"use strict";var n=a(0),i=a.n(n),c=(a(40),a(31)),l=a(30);t.a=function({notification:e,expandable:t,margin:a,children:s,dismiss:r}){const[o,d]=Object(n.useState)(e),[m,u]=Object(n.useState)(!1),f=e.type||"negative";return Object(n.useEffect)(()=>{if(!o.flashing&&o!==e){if(o.value!==e.value)return void d(e);d({...o,flashing:!0}),setTimeout(()=>{d(e)},640)}},[o,e]),i.a.createElement("div",{className:Object(c.a)("notification",f,a?"margin-"+a:"",m?"expanded":"",o.flashing?"flash":"")},i.a.createElement(l.a,{name:"negative"===f?"circle-cross":"circle-check",className:"notification-icon",size:"24px"}),t?i.a.createElement("div",{className:"notification-expandable-content-container"},i.a.createElement("div",{className:"notification-expandable-content"},i.a.createElement("span",null,e.value),i.a.createElement("button",{className:"btn icon-btn notification-btn notification-expand-btn",onClick:function(){u(!m)},title:"Details",style:{transform:`rotateZ(${m?"180deg":"0"})`}},i.a.createElement(l.a,{name:"menu-down"}))),m&&s):i.a.createElement("span",{className:"notification-text"},o.value),i.a.createElement("button",{type:"button",className:"btn icon-btn notification-btn notification-dismiss-btn",onClick:r,title:"Dismiss"},i.a.createElement(l.a,{name:"close"})))}},38:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return c}));const n=JSON.parse(localStorage.getItem("settings"))||{showCategories:!1,layoutType:"grid",invertColors:!1,keepToolbarVisible:!1};function i(){return n}function c(e,t){n[e]=t,localStorage.setItem("settings",JSON.stringify(n))}},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return d})),a.d(t,"e",(function(){return m}));class n{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise((a,n)=>{const i=indexedDB.open(e,1);i.onerror=()=>n(i.error),i.onsuccess=()=>a(i.result),i.onupgradeneeded=()=>{i.result.createObjectStore(t)}})}_withIDBStore(e,t){return this._dbp.then(a=>new Promise((n,i)=>{const c=a.transaction(this.storeName,e);c.oncomplete=()=>n(),c.onabort=c.onerror=()=>i(c.error),t(c.objectStore(this.storeName))}))}}let i;function c(){return i||(i=new n),i}const l=new n("ModestKeep","files");function s(){return function(e=c()){const t=[];return e._withIDBStore("readonly",e=>{(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}}).then(()=>t)}(l).then(e=>Promise.all(e.map(r))).then(m).catch(e=>(console.log(e),[]))}function r(e){return function(e,t=c()){let a;return t._withIDBStore("readonly",t=>{a=t.get(e)}).then(()=>a.result)}(e,l)}function o(e){!function(e,t,a=c()){a._withIDBStore("readwrite",a=>{a.put(t,e)})}(e.id,e,l)}function d(e){return function(e,t=c()){return t._withIDBStore("readwrite",t=>{t.delete(e)})}(e,l).then(()=>!0)}function m(e){const[t,a]=e.reduce((e,t)=>("reading"===t.status?e[0].push(t):e[1].push(t),e),[[],[]]);return function(e){return e.sort((e,t)=>t.accessedAt-e.accessedAt)}(t).concat(function(e){return e.sort((e,t)=>e.createdAt-t.createdAt)}(a))}},44:function(e,t,a){"use strict";var n=a(0),i=a.n(n),c=a(11);a(41);t.a=function({file:e,showLink:t,children:a}){return i.a.createElement("li",{className:"file-card"},t?i.a.createElement(c.b,{to:"/viewer/"+e.id,className:"file-card-left",title:"Open "+e.name},i.a.createElement("img",{src:e.coverImage,className:"file-card-image",alt:""})):i.a.createElement("img",{src:e.coverImage,className:"file-card-left file-card-image",alt:""}),i.a.createElement("div",{className:"file-card-info"},i.a.createElement("div",{className:"file-card-title"},e.title||e.name),e.author&&i.a.createElement("div",{className:"file-card-author"},e.author),i.a.createElement("div",{className:"file-card-secondary-info"},e.title&&i.a.createElement("div",{className:"file-card-secondary-info-item file-card-filename"},e.name),i.a.createElement("div",{className:"file-card-secondary-info-item"},e.sizeString)),i.a.createElement("div",{className:"file-card-progress-container",title:`${e.pageNumber} of ${e.pageCount} page${1===e.pageCount?"":"s"} read`},i.a.createElement("div",{className:"file-card-progress"},i.a.createElement("div",{className:"file-card-progress-bar",style:{left:(e.pageNumber-1)/e.pageCount*100+"%"}}))),i.a.createElement("div",{className:"file-card-bottom"},a)))}},50:function(e,t,a){e.exports=a.p+"static/media/background-image.21df966e.png"},51:function(e,t,a){e.exports=a.p+"static/media/icon.6032df8e.svg"},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},69:function(e,t,a){"use strict";var n="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),i=new Uint8Array(16);function c(){if(!n)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}var l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"===typeof e&&l.test(e)},r=[],o=0;o<256;++o)r.push((o+256).toString(16).substr(1));var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase();if(!s(a))throw TypeError("Stringified UUID is invalid");return a};t.a=function(e,t,a){var n=(e=e||{}).random||(e.rng||c)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(var i=0;i<16;++i)t[a+i]=n[i];return t}return d(n)}},70:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(69),l=a(31),s=a(43),r=a(38),o=a(30),d=a(35),m=a(50),u=a.n(m),f=a(51),p=a.n(f);a(52);var g=function({hide:e}){return i.a.createElement("div",{className:"landing-container"},i.a.createElement("div",{className:"landing"},i.a.createElement("div",{className:"landing-background"}),i.a.createElement("div",{className:"landing-background-image-container"},i.a.createElement("img",{src:u.a,className:"landing-background-image",alt:""})),i.a.createElement("div",{className:"landing-main"},i.a.createElement("img",{src:p.a,alt:"",className:"landing-icon"}),i.a.createElement("h1",{className:"landing-title"},"ModestRead"),i.a.createElement("p",{className:"landing-subtitle"},"A simple way to enjoy reading."),i.a.createElement("button",{className:"btn primary-btn landing-btn",onClick:e},"Get Started"))))},b=a(36),v=a(32);a(53);var h=function({notification:e,dismiss:t,handleFileUpload:a}){return i.a.createElement("div",{className:"no-files-notice"},i.a.createElement(v.a,null),i.a.createElement("div",{className:"no-files-notice-message-container"},i.a.createElement("p",{className:"no-files-notice-message-main"},"You don't have any files."),i.a.createElement("p",{className:"no-files-notice-message"},"Drag and drop or click on a button to import.")),e&&i.a.createElement(b.a,{notification:e,margin:"bottom",dismiss:t}),i.a.createElement("label",{className:"btn icon-text-btn primary-btn no-files-notice-btn"},i.a.createElement(o.a,{name:"upload",size:"24px"}),i.a.createElement("span",null,"Import Files"),i.a.createElement("input",{type:"file",onChange:a,className:"sr-only",accept:"application/pdf",multiple:!0})))};a(54);var E=function(){return i.a.createElement("li",{className:"file-card-placeholder"},i.a.createElement("div",{className:"file-card-image-placeholder"}),i.a.createElement("div",{className:"file-card-info-placeholder"},i.a.createElement("div",{className:"file-card-title-placeholder"}),i.a.createElement("div",{className:"file-card-author-placeholder"}),i.a.createElement("div",{className:"file-card-secondary-info-placeholder"},i.a.createElement("div",{className:"file-card-secondary-info-item-placeholder"}),i.a.createElement("div",{className:"file-card-secondary-info-item-placeholder"})),i.a.createElement("div",{className:"file-card-progress-placeholder"}),i.a.createElement("div",{className:"file-card-bottom-placeholder"},i.a.createElement("div",{className:"file-card-bottom-btn-placeholder"}))))},N=a(44);a(55);t.default=function(){const[e,t]=Object(n.useState)(null),[m,u]=Object(n.useState)([]),[f,p]=Object(n.useState)(null),[v,C]=Object(n.useState)(null),[L,y]=Object(n.useState)(!1),[w,H]=Object(n.useState)(localStorage.getItem("hide-landing-page")),V=Object(n.useCallback)((function(e){e.preventDefault(),e.dataTransfer.files.length&&M(e.dataTransfer.files)}),[e,m]),k=Object(n.useCallback)((function(e){e.preventDefault()}),[e,m]);function M(a){const n=Array.from(a).filter(e=>e.name.endsWith(".pdf"));if(1===a.length){let e="";if(n.length?m.find(({name:e})=>e===a[0].name)&&(e="File already exist."):e="File is not supported.",e)return p({value:e}),void C(!1)}else if(!n.length)return p({value:"No supported files found."}),void C(!1);const i=[],r=[];for(const e of n){m.find(({name:t})=>t===e.name)?i.push(e.name):r.push({file:e,id:Object(c.a)(),createdAt:Date.now(),name:e.name,size:e.size,sizeString:Object(l.b)(e.size),status:"not started",pageNumber:1,loading:!0})}if(i.length){if(i.length===a.length)return p({value:"Files already exist."}),void C(!1);p({value:"Some of the files were not imported because they already exist.",files:i,expandable:!0})}const o=Object(s.e)(r.concat(m));u(o),y(!0),t({...e,categories:x(o)}),C(!1),f&&j(),localStorage.setItem("hide-landing-page",!0)}function x(e){const t=[{name:"All",id:"all",icon:"bookshelf",files:[]},{name:"Reading",id:"reading",icon:"open-book",files:[]},{name:"Planing to Read",id:"planing to read",icon:"book-question-mark",files:[]},{name:"Have Read",id:"have read",icon:"book-check-mark",files:[]},{name:"Not Started",id:"not started",icon:"book",files:[]}];for(const a of t)"all"===a.id?a.files=e:a.files=e.filter(e=>e.status===a.id);return t}function A(e){e.target.files.length&&M(e.target.files),e.target.value=""}function j(){p(null)}function O(a){a!==e.type&&(t({...e,type:a}),Object(r.b)("layoutType",a))}function S(a){const{checked:n}=a.target;t({...e,showCategories:n}),Object(r.b)("showCategories",n)}function Z(){C(!v)}function R({target:e,currentTarget:t}){v&&e===t&&C(!1)}function z(a){return i.a.createElement(N.a,{file:a,showLink:!0,key:a.id},i.a.createElement(d.a,{toggle:{content:i.a.createElement(o.a,{name:"dots-vertical"}),title:"More",className:"btn icon-btn"}},i.a.createElement("div",{className:"files-file-card-dropdown-group"},i.a.createElement("div",{className:"files-file-card-dropdown-group-title"},"Reading Status"),e.categories.slice(1).map((n,c)=>i.a.createElement("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn"+(a.status===n.id?" active":""),key:c,onClick:()=>function(a,n){const i=m.findIndex(e=>e.id===a),c=m[i];n!==c.status&&("reset"===n?delete c.status:(c.status=n,"reading"===n&&(c.accessedAt=Date.now(),m.splice(i,1),m.unshift(c))),u([...m]),t({...e,categories:x(m)}),Object(s.d)(c))}(a.id,n.id)},i.a.createElement(o.a,{name:n.icon}),i.a.createElement("span",null,n.name)))),i.a.createElement("div",{className:"files-file-card-dropdown-group"},i.a.createElement("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn",onClick:()=>function(a){const n=m.find(e=>e.id===a);n.status="not started",n.pageNumber=1,delete n.accessedAt,delete n.scale,delete n.scrollLeft,delete n.scrollTop,u([...m]),t({...e,categories:x(m)}),Object(s.d)(n)}(a.id)},i.a.createElement(o.a,{name:"reset"}),i.a.createElement("span",null,"Reset Progress")),i.a.createElement("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn",onClick:()=>function(a){const n=m.findIndex(e=>e.id===a);m.splice(n,1),u([...m]),t({...e,categories:x(m)}),Object(s.a)(a)}(a.id)},i.a.createElement(o.a,{name:"trash"}),i.a.createElement("span",null,"Remove File")))))}function I(t){return i.a.createElement("ul",{className:"files-cards "+e.type},t.map(e=>e.loading?i.a.createElement(E,{key:e.id}):z(e)))}return Object(n.useEffect)(()=>{w?async function(){const e=await Object(s.c)(),a=Object(r.a)();u(e),t({visibleCategory:"all",categories:x(e),type:a.layoutType,showCategories:a.showCategories}),Object(l.f)("Files")}():window.title="ModestRead"},[w]),Object(n.useEffect)(()=>{async function e(e,t){const a=await Object(l.c)(e.file,t),[n,i]=await Promise.all([a.getMetadata(),Object(l.d)(a)]);delete e.loading,delete e.file,Object.assign(e,{...Object(l.e)(n),coverImage:i,pageCount:a.numPages}),u([...m]),Object(s.d)(e)}L&&(y(!1),async function(){const t=await Promise.all([a.e(0),a.e(7)]).then(a.t.bind(null,56,7));for(const a of m)a.loading&&e(a,t)}())},[L]),Object(n.useEffect)(()=>(window.addEventListener("drop",V),window.addEventListener("dragover",k),()=>{window.removeEventListener("drop",V),window.removeEventListener("dragover",k)}),[V,k]),w?e?i.a.createElement("div",{className:"files"},m.length?i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"files-header"},i.a.createElement("div",{className:"files-sidebar-toggle-btn-container"},i.a.createElement("button",{className:"btn icon-btn",onClick:Z},i.a.createElement(o.a,{name:"menu",size:"24px"}))),i.a.createElement("div",{className:"files-header-title-container"},i.a.createElement("h1",{className:"files-header-title"},"ModestRead")),i.a.createElement("div",{className:"files-categories-container"+(v?" visible":""),onClick:R},i.a.createElement("div",{className:"files-sidebar"},i.a.createElement("div",{className:"files-sidebar-title-container"},i.a.createElement("h1",{className:"files-sidebar-title"},"ModestRead")),i.a.createElement("ul",{className:"files-categories"},e.categories.map((a,n)=>i.a.createElement("li",{key:n},i.a.createElement("button",{className:"btn icon-text-btn files-category-btn"+(e.visibleCategory===a.id?" active":""),onClick:()=>function(a){a!==e.visibleCategory&&(t({...e,visibleCategory:a}),v&&C(!1))}(a.id)},i.a.createElement(o.a,{name:a.icon,size:"24px"}),i.a.createElement("span",null,a.name),i.a.createElement("span",null,a.files.length))))),i.a.createElement("label",{className:"btn icon-text-btn dropdown-btn files-import-btn"},i.a.createElement(o.a,{name:"upload",size:"24px"}),i.a.createElement("span",null,"Import Files"),i.a.createElement("input",{type:"file",onChange:A,className:"sr-only",accept:"application/pdf",multiple:!0})),i.a.createElement(d.a,{toggle:{content:i.a.createElement(o.a,{name:"settings",size:"24px"}),title:"Settings",className:"btn icon-btn icon-btn-alt files-settings-toggle-btn"},body:{className:"files-settings"}},i.a.createElement("div",{className:"files-settings-layout"},i.a.createElement("button",{className:"btn icon-text-btn files-settings-layout-item"+("grid"===e.type?" active":""),onClick:()=>O("grid")},i.a.createElement(o.a,{name:"grid",size:"24px"}),i.a.createElement("span",null,"Grid")),i.a.createElement("button",{className:"btn icon-text-btn files-settings-layout-item"+("list"===e.type?" active":""),onClick:()=>O("list")},i.a.createElement(o.a,{name:"list",size:"24px"}),i.a.createElement("span",null,"List"))),i.a.createElement("label",{className:"checkbox-container files-settings-show-categories-setting"},i.a.createElement("input",{type:"checkbox",className:"sr-only checkbox-input",onChange:S,checked:e.showCategories}),i.a.createElement("div",{className:"checkbox"},i.a.createElement("div",{className:"checkbox-tick"})),i.a.createElement("span",{className:"checkbox-label"},"Show categories")))))),f&&i.a.createElement(b.a,{notification:f,expandable:f.expandable,dismiss:j},f.files?i.a.createElement("ul",{className:"files-duplicate-files"},f.files.map((e,t)=>i.a.createElement("li",{className:"files-duplicate-file",key:t},e))):null),function(){if("all"===e.visibleCategory&&e.showCategories)return e.categories.slice(1).map((e,t)=>e.files.length?i.a.createElement("div",{key:t},i.a.createElement("h3",{className:"files-category-name"},i.a.createElement(o.a,{name:e.icon,size:"24px"}),i.a.createElement("span",null,e.name)),I(e.files)):null);const{files:t}=e.categories.find(({id:t})=>t===e.visibleCategory);return t.length?I(t):i.a.createElement("p",{className:"files-empty-category-notice"},"You have no files in this category.")}()):i.a.createElement(h,{notification:f,dismiss:j,handleFileUpload:A})):null:i.a.createElement(g,{hide:function(){H(!0)}})}}}]);