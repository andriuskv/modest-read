(this["webpackJsonpmodest-read"]=this["webpackJsonpmodest-read"]||[]).push([[8],{140:function(e,t,s){"use strict";s.r(t);var i=s(3),n=s(0),a=s(141),c=(s(73),s(36)),l=s(41),o=s(38),r=s(32),d=s(46),b=s.p+"static/media/background-image.b12894ed.png",j=s.p+"static/media/icon.4d9a1499.svg";s(75);var m=function({hide:e}){return Object(i.jsx)("div",{className:"landing-container",children:Object(i.jsxs)("div",{className:"landing",children:[Object(i.jsx)("div",{className:"landing-background"}),Object(i.jsx)("div",{className:"landing-background-image-container",children:Object(i.jsx)("img",{src:b,className:"landing-background-image",alt:""})}),Object(i.jsxs)("div",{className:"landing-main",children:[Object(i.jsx)("img",{src:j,alt:"",className:"landing-icon"}),Object(i.jsx)("h1",{className:"landing-title",children:"ModestRead"}),Object(i.jsx)("p",{className:"landing-subtitle",children:"A simple way to enjoy reading."}),Object(i.jsx)("button",{className:"btn primary-btn landing-btn",onClick:e,children:"Get Started"})]})]})})},f=s(47),u=s(40);s(77);var h=function({notification:e,dismiss:t,handleFileUpload:s}){return Object(i.jsxs)("div",{className:"no-files-notice",children:[Object(i.jsx)(u.a,{}),Object(i.jsxs)("div",{className:"no-files-notice-message-container",children:[Object(i.jsx)("p",{className:"no-files-notice-message-main",children:"You don't have any files."}),Object(i.jsx)("p",{className:"no-files-notice-message",children:"Drag and drop or click on a button to import."})]}),e&&Object(i.jsx)(f.a,{notification:e,margin:"bottom",dismiss:t}),Object(i.jsxs)("label",{className:"btn icon-text-btn primary-btn no-files-notice-btn",children:[Object(i.jsx)(r.a,{name:"upload",size:"24px"}),Object(i.jsx)("span",{children:"Import Files"}),Object(i.jsx)("input",{type:"file",onChange:s,className:"sr-only",accept:"application/pdf",multiple:!0})]})]})},O=s(71);s(79);var g=function(){return Object(i.jsxs)("li",{className:"file-card-placeholder",children:[Object(i.jsx)("div",{className:"file-card-image-placeholder"}),Object(i.jsxs)("div",{className:"file-card-info-placeholder",children:[Object(i.jsx)("div",{className:"file-card-title-placeholder"}),Object(i.jsx)("div",{className:"file-card-author-placeholder"}),Object(i.jsxs)("div",{className:"file-card-secondary-info-placeholder",children:[Object(i.jsx)("div",{className:"file-card-secondary-info-item-placeholder"}),Object(i.jsx)("div",{className:"file-card-secondary-info-item-placeholder"})]}),Object(i.jsx)("div",{className:"file-card-progress-placeholder"}),Object(i.jsx)("div",{className:"file-card-bottom-placeholder",children:Object(i.jsx)("div",{className:"file-card-bottom-btn-placeholder"})})]})]})};s(80);var p=function({searchFiles:e,resetSearch:t}){const[s,a]=Object(n.useState)(""),c=Object(n.useRef)(0);return Object(i.jsxs)("div",{className:"files-search",children:[Object(i.jsx)(r.a,{name:"search",className:"files-search-item files-search-icon"}),Object(i.jsx)("input",{type:"text",className:"input files-search-input",placeholder:"Search",onChange:function({target:t}){a(t.value),clearTimeout(c.current),c.current=setTimeout((()=>{e(t.value)}),400)},value:s}),s&&Object(i.jsx)("button",{className:"btn icon-btn icon-btn-alt files-search-item files-search-btn",onClick:function(){t(),a("")},children:Object(i.jsx)(r.a,{name:"close"})})]})};s(81);var x=function({sortBy:e,sortOrder:t,sortFileCatalog:s}){function n({target:t}){s(e,Number(t.value))}return Object(i.jsxs)(d.a,{toggle:{content:Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(r.a,{name:"sort",size:"24px"}),Object(i.jsx)("span",{children:"Sort"})]}),className:"btn icon-text-btn files-sort-dropdown-toggle-btn"},body:{className:"files-sort-dropdown"},children:[Object(i.jsxs)("div",{className:"files-sort-dropdown-group",children:[Object(i.jsx)("button",{className:"btn text-btn dropdown-btn files-sort-dropdown-btn"+("file-name"===e?" active":""),onClick:()=>s("file-name"),children:"File name"}),Object(i.jsx)("button",{className:"btn text-btn dropdown-btn files-sort-dropdown-btn"+("file-size"===e?" active":""),onClick:()=>s("file-size"),children:"File size"}),Object(i.jsx)("button",{className:"btn text-btn dropdown-btn files-sort-dropdown-btn"+("last-accessed"===e?" active":""),onClick:()=>s("last-accessed"),children:"Last accessed"})]}),Object(i.jsxs)("div",{className:"files-sort-dropdown-group",children:[Object(i.jsxs)("label",{className:"dropdown-btn files-sort-dropdown-radio",children:[Object(i.jsx)("input",{type:"radio",className:"sr-only radio-input",name:"sortOrder",value:"1",onChange:n,checked:1===t}),Object(i.jsx)("div",{className:"radio"}),Object(i.jsx)("span",{className:"radio-label",children:"Ascending"})]}),Object(i.jsxs)("label",{className:"dropdown-btn files-sort-dropdown-radio",children:[Object(i.jsx)("input",{type:"radio",className:"sr-only radio-input",onChange:n,name:"sortOrder",value:"-1",checked:-1===t}),Object(i.jsx)("div",{className:"radio"}),Object(i.jsx)("span",{className:"radio-label",children:"Descending"})]})]})]})};s(82);var v=function({type:e,iconId:t,title:s,message:a,action:c,hide:l,resetProgress:o,removeFile:d}){const b="reset"===e?o:d;function j(e){"Escape"===e.key&&l()}return Object(n.useEffect)((()=>(window.addEventListener("keydown",j),()=>{window.removeEventListener("keydown",j)})),[]),Object(i.jsx)("div",{className:"files-modal",onClick:function(e){e.target===e.currentTarget&&l()},children:Object(i.jsxs)("div",{className:"files-modal-content",children:[Object(i.jsxs)("div",{className:"files-modal-title-container",children:[Object(i.jsx)(r.a,{name:t,className:"files-modal-title-icon"}),Object(i.jsx)("h3",{className:"files-modal-title",children:s})]}),Object(i.jsx)("p",{children:a}),Object(i.jsxs)("div",{className:"files-modal-content-bottom",children:[Object(i.jsx)("button",{className:"btn text-btn",onClick:l,children:"Cancel"}),Object(i.jsxs)("button",{className:"btn icon-text-btn",onClick:b,children:[Object(i.jsx)(r.a,{name:t}),Object(i.jsx)("span",{children:c})]})]})]})})};t.default=function(){const[e,t]=Object(n.useState)(null),[b,j]=Object(n.useState)([]),[u,N]=Object(n.useState)(null),[y,w]=Object(n.useState)(null),[C,k]=Object(n.useState)(!1),[F,S]=Object(n.useState)((()=>localStorage.getItem("hide-landing-page"))),[z,R]=Object(n.useState)(null),L=Object(n.useCallback)((function(e){e.preventDefault(),e.dataTransfer.files.length&&B(e.dataTransfer.files)}),[e,b]),I=Object(n.useCallback)((function(e){e.preventDefault()}),[e,b]);function B(s){const i=Array.from(s).filter((e=>e.name.endsWith(".pdf")||e.name.endsWith(".epub")));if(1===s.length){let e="";if(i.length?b.find((({name:e})=>e===s[0].name))&&(e="File already exist."):e="File is not supported.",e)return N({value:e}),void w(!1)}else if(!i.length)return N({value:"No supported files found."}),void w(!1);const n=[],o=[];for(const e of i){b.find((({name:t})=>t===e.name))?n.push(e.name):o.push({blob:e,id:Object(a.a)(),createdAt:Date.now(),name:e.name,size:e.size,type:e.name.slice(e.name.lastIndexOf(".")+1),sizeString:Object(c.e)(e.size),status:"not started",pageNumber:1,loading:!0})}if(n.length){if(n.length===s.length)return N({value:"Files already exist."}),void w(!1);N({value:"Some of the files were not imported because they already exist.",files:n,expandable:!0})}const r=Object(l.e)(o.concat(b),{sortBy:e.sortBy,sortOrder:e.sortOrder});j(r),k(!0),t({...e,categories:E(r)}),w(!1),u&&T(),localStorage.setItem("hide-landing-page",!0)}function E(e){const t=[{name:"All",id:"all",icon:"bookshelf",files:[]},{name:"Reading",id:"reading",icon:"open-book",files:[]},{name:"Planing to Read",id:"planing to read",icon:"book-question-mark",files:[]},{name:"Have Read",id:"have read",icon:"book-check-mark",files:[]},{name:"Not Started",id:"not started",icon:"book",files:[]}];for(const s of t)"all"===s.id?s.files=e:s.files=e.filter((e=>e.status===s.id));return t}function P(e){e.target.files.length&&B(e.target.files),e.target.value=""}function A(){R(null)}function T(){N(null)}function M(s){s!==e.type&&(t({...e,type:s}),Object(o.c)("layoutType",s))}function D(s){const{checked:i}=s.target;t({...e,showCategories:i}),Object(o.c)("showCategories",i)}function Y(){w(!y)}function J({target:e,currentTarget:t}){y&&e===t&&w(!1)}function G(){delete e.matchedFileCount,delete e.searchCategories,t({...e})}function U(s){return Object(i.jsx)(O.a,{file:s,showLink:!0,children:Object(i.jsxs)(d.a,{toggle:{content:Object(i.jsx)(r.a,{name:"dots-vertical"}),title:"More",className:"btn icon-btn"},children:[Object(i.jsxs)("div",{className:"files-file-card-dropdown-group",children:[Object(i.jsx)("div",{className:"files-file-card-dropdown-group-title",children:"Reading Status"}),e.categories.slice(1).map(((n,a)=>Object(i.jsxs)("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn"+(s.status===n.id?" active":""),onClick:()=>function(s,i){const n=b.findIndex((e=>e.id===s)),a=b[n];i!==a.status&&("reset"===i?delete a.status:(a.status=i,"reading"===i&&(a.accessedAt=Date.now(),b.splice(n,1),b.unshift(a))),j([...b]),t({...e,categories:E(b)}),Object(l.d)(a))}(s.id,n.id),children:[Object(i.jsx)(r.a,{name:n.icon}),Object(i.jsx)("span",{children:n.name})]},a)))]}),Object(i.jsxs)("div",{className:"files-file-card-dropdown-group",children:[Object(i.jsxs)("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn",onClick:()=>{return e=s.id,void R({id:e,type:"reset",iconId:"reset",title:"Reset Progress?",message:"Are you sure you want to reset reading progress for this file?",action:"Reset"});var e},children:[Object(i.jsx)(r.a,{name:"reset"}),Object(i.jsx)("span",{children:"Reset Progress"})]}),Object(i.jsxs)("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn",onClick:()=>{return e=s.id,void R({id:e,type:"remove",iconId:"trash",title:"Remove File?",message:"Are you sure you want to remove this file?",action:"Remove"});var e},children:[Object(i.jsx)(r.a,{name:"trash"}),Object(i.jsx)("span",{children:"Remove File"})]})]})]})},s.id)}function W(t){return Object(i.jsx)("ul",{className:`files-cards ${e.type}`,children:t.map((e=>e.loading?Object(i.jsx)(g,{},e.id):U(e)))})}return Object(n.useEffect)((()=>{F?async function(){const e=Object(o.b)(),s=await Object(l.c)(e);j(s),t({visibleCategory:"all",categories:E(s),sortBy:e.sortBy,sortOrder:e.sortOrder,type:e.layoutType,showCategories:e.showCategories}),Object(c.l)("Files")}():window.title="ModestRead"}),[F]),Object(n.useEffect)((()=>{async function e(e){"pdf"===e.type?async function(e){const t=await Object(c.g)(e.blob),[s,i]=await Promise.all([t.getMetadata(),Object(c.i)(t)]);delete e.loading,delete e.blob,Object.assign(e,{...Object(c.j)(s),coverImage:i,viewMode:"multi",pageCount:t.numPages}),j([...b]),Object(l.d)(e)}(e):"epub"===e.type&&async function(e){const{default:t}=await Promise.all([s.e(0),s.e(1)]).then(s.bind(null,138)),i=t(e.blob);await i.ready;const[n,a,o]=await Promise.all([i.loaded.metadata,i.locations.generate(1650),Object(c.d)(i)]);n.title&&(e.title=n.title),n.creator&&(e.author=n.creator),e.storedPosition=JSON.stringify(a),e.pageCount=i.locations.length(),e.coverImage=o,e.viewMode="single",delete e.loading,delete e.blob,j([...b]),Object(l.d)(e)}(e)}C&&(k(!1),async function(){for(const t of b)t.loading&&e(t)}())}),[C]),Object(n.useEffect)((()=>(window.addEventListener("drop",L),window.addEventListener("dragover",I),()=>{window.removeEventListener("drop",L),window.removeEventListener("dragover",I)})),[L,I]),F?e?Object(i.jsxs)("div",{className:"files",children:[b.length?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"files-header",children:[Object(i.jsx)("div",{className:"files-sidebar-toggle-btn-container",children:Object(i.jsx)("button",{className:"btn icon-btn",onClick:Y,children:Object(i.jsx)(r.a,{name:"menu",size:"24px"})})}),Object(i.jsx)("div",{className:"files-header-title-container",children:Object(i.jsx)("h1",{className:"files-header-title",children:"ModestRead"})}),Object(i.jsx)("div",{className:"files-categories-container"+(y?" visible":""),onClick:J,children:Object(i.jsxs)("div",{className:"files-sidebar",children:[Object(i.jsx)("div",{className:"files-sidebar-title-container",children:Object(i.jsx)("span",{className:"files-sidebar-title",children:"ModestRead"})}),Object(i.jsx)("ul",{className:"files-categories",children:e.categories.map(((s,n)=>Object(i.jsx)("li",{children:Object(i.jsxs)("button",{className:"btn icon-text-btn files-category-btn"+(e.visibleCategory===s.id?" active":""),onClick:()=>function(s){s!==e.visibleCategory&&(t({...e,visibleCategory:s}),y&&w(!1))}(s.id),children:[Object(i.jsx)(r.a,{name:s.icon,size:"24px"}),Object(i.jsx)("span",{children:s.name}),Object(i.jsx)("span",{children:s.files.length})]})},n)))}),Object(i.jsxs)("label",{className:"btn icon-text-btn dropdown-btn files-import-btn",children:[Object(i.jsx)(r.a,{name:"upload",size:"24px"}),Object(i.jsx)("span",{children:"Import Files"}),Object(i.jsx)("input",{type:"file",onChange:P,className:"sr-only",accept:"application/pdf",multiple:!0})]}),Object(i.jsxs)(d.a,{toggle:{content:Object(i.jsx)(r.a,{name:"settings",size:"24px"}),title:"Settings",className:"btn icon-btn icon-btn-alt files-settings-toggle-btn"},body:{className:"files-settings"},children:[Object(i.jsxs)("div",{className:"files-settings-layout",children:[Object(i.jsxs)("button",{className:"btn icon-text-btn files-settings-layout-item"+("grid"===e.type?" active":""),onClick:()=>M("grid"),children:[Object(i.jsx)(r.a,{name:"grid",size:"24px"}),Object(i.jsx)("span",{children:"Grid"})]}),Object(i.jsxs)("button",{className:"btn icon-text-btn files-settings-layout-item"+("list"===e.type?" active":""),onClick:()=>M("list"),children:[Object(i.jsx)(r.a,{name:"list",size:"24px"}),Object(i.jsx)("span",{children:"List"})]})]}),Object(i.jsxs)("label",{className:"checkbox-container files-settings-show-categories-setting",children:[Object(i.jsx)("input",{type:"checkbox",className:"sr-only checkbox-input",onChange:D,checked:e.showCategories}),Object(i.jsx)("div",{className:"checkbox",children:Object(i.jsx)("div",{className:"checkbox-tick"})}),Object(i.jsx)("span",{className:"checkbox-label",children:"Show categories"})]})]})]})})]}),Object(i.jsxs)("div",{className:"files-top-bar",children:[Object(i.jsx)(p,{searchFiles:function(s){if(s){const i=b.filter((e=>{var t,i;return e.name.toLowerCase().includes(s)||(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(i=e.artist)||void 0===i?void 0:i.toLowerCase().includes(s))}));t({...e,matchedFileCount:i.length,searchCategories:i.length?E(i):[]})}else G()},resetSearch:G}),Object(i.jsx)(x,{sortBy:e.sortBy,sortOrder:e.sortOrder,sortFileCatalog:function(s,i=1){if(s===e.sortBy&&i===e.sortOrder)return;const n=Object(l.e)(b,{sortBy:s,sortOrder:i});j(n),t({...e,sortBy:s,sortOrder:i,categories:E(n)}),Object(o.d)({sortBy:s,sortOrder:i})}})]}),u&&Object(i.jsx)(f.a,{notification:u,expandable:u.expandable,dismiss:T,margin:"top",children:u.files?Object(i.jsx)("ul",{className:"files-duplicate-files",children:u.files.map(((e,t)=>Object(i.jsx)("li",{className:"files-duplicate-file",children:e},t)))}):null}),function(){const t=e.searchCategories||e.categories;if("all"===e.visibleCategory&&e.showCategories)return 0===e.matchedFileCount?Object(i.jsx)("p",{className:"files-category-notice",children:"Your search term doesn't match any files."}):Object(i.jsx)("div",{children:t.slice(1).map(((e,t)=>e.files.length?Object(i.jsxs)("div",{className:"files-category",children:[Object(i.jsxs)("h3",{className:"files-category-name",children:[Object(i.jsx)(r.a,{name:e.icon,size:"24px"}),Object(i.jsx)("span",{children:e.name})]}),W(e.files)]},t):null))});const{files:s}=t.find((({id:t})=>t===e.visibleCategory));if(s.length)return W(s);const{files:n}=e.categories.find((({id:t})=>t===e.visibleCategory)),a=e.searchCategories&&n.length?"Your search term doesn't match any files in this category.":"You have no files in this category.";return Object(i.jsx)("p",{className:"files-category-notice",children:a})}()]}):Object(i.jsx)(h,{notification:u,dismiss:T,handleFileUpload:P}),z?Object(i.jsx)(v,{...z,resetProgress:function(){const s=b.find((e=>e.id===z.id));s.status="not started",s.pageNumber=1,"epub"===s.type&&delete s.location,delete s.accessedAt,delete s.scrollLeft,delete s.scrollTop,j([...b]),t({...e,categories:E(b)}),Object(l.d)(s),A()},removeFile:function(){const{id:s}=z,i=b.findIndex((e=>e.id===s));b.splice(i,1),j([...b]),t({...e,categories:E(b)}),Object(l.a)(s),A()},hide:A}):null]}):null:Object(i.jsx)(m,{hide:function(){S(!0)}})}},73:function(e,t,s){},75:function(e,t,s){},77:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){}}]);