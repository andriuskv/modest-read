(this["webpackJsonpmodest-read"]=this["webpackJsonpmodest-read"]||[]).push([[8],{144:function(e,t,s){"use strict";s.r(t);var n=s(3),i=s(0),a=s(13),c=s(145),l=s(34),o=s(41),r=s(38),d=s(61),b=s(32),j=s(47),m=s.p+"static/media/background-image.b12894ed.png",f=s.p+"static/media/icon.4d9a1499.svg";s(77);var u=function({hide:e}){return Object(n.jsx)("div",{className:"landing-container",children:Object(n.jsxs)("div",{className:"landing",children:[Object(n.jsx)("div",{className:"landing-background"}),Object(n.jsx)("div",{className:"landing-background-image-container",children:Object(n.jsx)("img",{src:m,className:"landing-background-image",alt:""})}),Object(n.jsxs)("div",{className:"landing-main",children:[Object(n.jsx)("img",{src:f,alt:"",className:"landing-icon"}),Object(n.jsx)("h1",{className:"landing-title",children:"ModestRead"}),Object(n.jsx)("p",{className:"landing-subtitle",children:"A simple way to enjoy reading."}),Object(n.jsx)("button",{className:"btn primary-btn landing-btn",onClick:e,children:"Get Started"})]})]})})},h=s(48),O=s(40);s(79);var p=function({notification:e,dismiss:t,handleFileUpload:s}){return Object(n.jsxs)("div",{className:"no-files-notice",children:[Object(n.jsx)(O.a,{}),Object(n.jsxs)("div",{className:"no-files-notice-message-container",children:[Object(n.jsx)("p",{className:"no-files-notice-message-main",children:"You don't have any files."}),Object(n.jsx)("p",{className:"no-files-notice-message",children:"Drag and drop or click on a button to import."})]}),e&&Object(n.jsx)(h.a,{notification:e,margin:"bottom",dismiss:t}),Object(n.jsxs)("label",{className:"btn icon-text-btn primary-btn no-files-notice-btn",children:[Object(n.jsx)(b.a,{name:"upload",size:"24px"}),Object(n.jsx)("span",{children:"Import Files"}),Object(n.jsx)("input",{type:"file",onChange:s,className:"sr-only",accept:"application/pdf",multiple:!0})]})]})},x=s(74);s(81);var g=function(){return Object(n.jsxs)("li",{className:"file-card-placeholder",children:[Object(n.jsx)("div",{className:"file-card-image-placeholder"}),Object(n.jsxs)("div",{className:"file-card-info-placeholder",children:[Object(n.jsx)("div",{className:"file-card-title-placeholder"}),Object(n.jsx)("div",{className:"file-card-author-placeholder"}),Object(n.jsxs)("div",{className:"file-card-secondary-info-placeholder",children:[Object(n.jsx)("div",{className:"file-card-secondary-info-item-placeholder"}),Object(n.jsx)("div",{className:"file-card-secondary-info-item-placeholder"})]}),Object(n.jsx)("div",{className:"file-card-progress-placeholder"}),Object(n.jsx)("div",{className:"file-card-bottom-placeholder",children:Object(n.jsx)("div",{className:"file-card-bottom-btn-placeholder"})})]})]})};s(82);var v=function({searchFiles:e,resetSearch:t}){const[s,a]=Object(i.useState)(""),c=Object(i.useRef)(0);return Object(n.jsxs)("div",{className:"files-search",children:[Object(n.jsx)(b.a,{name:"search",className:"files-search-item files-search-icon"}),Object(n.jsx)("input",{type:"text",className:"input files-search-input",placeholder:"Search",onChange:function({target:t}){a(t.value),clearTimeout(c.current),c.current=setTimeout((()=>{e(t.value)}),400)},value:s}),s&&Object(n.jsx)("button",{className:"btn icon-btn icon-btn-alt files-search-item files-search-btn",onClick:function(){t(),a("")},children:Object(n.jsx)(b.a,{name:"close"})})]})};s(83);var N=function({sortBy:e,sortOrder:t,sortFileCatalog:s}){function i({target:t}){s(e,Number(t.value))}return Object(n.jsxs)(j.a,{toggle:{content:Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(b.a,{name:"sort",size:"24px"}),Object(n.jsx)("span",{children:"Sort"})]}),className:"btn icon-text-btn files-sort-dropdown-toggle-btn"},body:{className:"files-sort-dropdown"},children:[Object(n.jsxs)("div",{className:"files-sort-dropdown-group",children:[Object(n.jsx)("button",{className:"btn text-btn dropdown-btn files-sort-dropdown-btn"+("file-name"===e?" active":""),onClick:()=>s("file-name"),children:"File name"}),Object(n.jsx)("button",{className:"btn text-btn dropdown-btn files-sort-dropdown-btn"+("file-size"===e?" active":""),onClick:()=>s("file-size"),children:"File size"}),Object(n.jsx)("button",{className:"btn text-btn dropdown-btn files-sort-dropdown-btn"+("last-accessed"===e?" active":""),onClick:()=>s("last-accessed"),children:"Last accessed"})]}),Object(n.jsxs)("div",{className:"files-sort-dropdown-group",children:[Object(n.jsxs)("label",{className:"dropdown-btn files-sort-dropdown-radio",children:[Object(n.jsx)("input",{type:"radio",className:"sr-only radio-input",name:"sortOrder",value:"1",onChange:i,checked:1===t}),Object(n.jsx)("div",{className:"radio"}),Object(n.jsx)("span",{className:"radio-label",children:"Ascending"})]}),Object(n.jsxs)("label",{className:"dropdown-btn files-sort-dropdown-radio",children:[Object(n.jsx)("input",{type:"radio",className:"sr-only radio-input",onChange:i,name:"sortOrder",value:"-1",checked:-1===t}),Object(n.jsx)("div",{className:"radio"}),Object(n.jsx)("span",{className:"radio-label",children:"Descending"})]})]})]})};s(84);var y=function({type:e,iconId:t,title:s,message:a,action:c,hide:l,resetProgress:o,removeFile:r}){const d="reset"===e?o:r;function j(e){"Escape"===e.key&&l()}return Object(i.useEffect)((()=>(window.addEventListener("keydown",j),()=>{window.removeEventListener("keydown",j)})),[]),Object(n.jsx)("div",{className:"files-modal",onClick:function(e){e.target===e.currentTarget&&l()},children:Object(n.jsxs)("div",{className:"files-modal-content",children:[Object(n.jsxs)("div",{className:"files-modal-title-container",children:[Object(n.jsx)(b.a,{name:t,className:"files-modal-title-icon"}),Object(n.jsx)("h3",{className:"files-modal-title",children:s})]}),Object(n.jsx)("p",{children:a}),Object(n.jsxs)("div",{className:"files-modal-content-bottom",children:[Object(n.jsx)("button",{className:"btn text-btn",onClick:l,children:"Cancel"}),Object(n.jsxs)("button",{className:"btn icon-text-btn",onClick:d,children:[Object(n.jsx)(b.a,{name:t}),Object(n.jsx)("span",{children:c})]})]})]})})};s(85);t.default=function(){const[e,t]=Object(i.useState)(null),[m,f]=Object(i.useState)([]),[O,w]=Object(i.useState)(null),[C,k]=Object(i.useState)(null),[F,S]=Object(i.useState)(!1),[z,R]=Object(i.useState)((()=>localStorage.getItem("hide-landing-page"))),[L,I]=Object(i.useState)(null),B=Object(i.useCallback)((function(e){e.preventDefault(),e.dataTransfer.files.length&&P(e.dataTransfer.files)}),[e,m]),E=Object(i.useCallback)((function(e){e.preventDefault()}),[e,m]);function P(s){const n=Array.from(s).filter((e=>e.name.endsWith(".pdf")||e.name.endsWith(".epub")));if(1===s.length){let e="";if(n.length?m.find((({name:e})=>e===s[0].name))&&(e="File already exist."):e="File is not supported.",e)return w({value:e}),void k(!1)}else if(!n.length)return w({value:"No supported files found."}),void k(!1);const i=[],a=[];for(const e of n){m.find((({name:t})=>t===e.name))?i.push(e.name):a.push({blob:e,id:Object(c.a)(),createdAt:Date.now(),name:e.name,size:e.size,type:e.name.slice(e.name.lastIndexOf(".")+1),sizeString:Object(l.e)(e.size),status:"not started",pageNumber:1,loading:!0})}if(i.length){if(i.length===s.length)return w({value:"Files already exist."}),void k(!1);w({value:"Some of the files were not imported because they already exist.",files:i,expandable:!0})}const r=Object(o.e)(a.concat(m),{sortBy:e.sortBy,sortOrder:e.sortOrder});f(r),S(!0),t({...e,categories:T(r)}),k(!1),O&&D(),localStorage.setItem("hide-landing-page",!0)}function T(e){const t=[{name:"All",id:"all",icon:"bookshelf",files:[]},{name:"Reading",id:"reading",icon:"open-book",files:[]},{name:"Planing to Read",id:"planing to read",icon:"book-question-mark",files:[]},{name:"Not Started",id:"not started",icon:"book",files:[]},{name:"Have Read",id:"have read",icon:"book-check-mark",files:[]}];for(const s of t)"all"===s.id?s.files=e:s.files=e.filter((e=>e.status===s.id));return t}function A(e){e.target.files.length&&P(e.target.files),e.target.value=""}function M(){I(null)}function D(){w(null)}function Y(s){s!==e.type&&(t({...e,type:s}),Object(r.c)("layoutType",s))}function J(s){const{checked:n}=s.target;t({...e,showCategories:n}),Object(r.c)("showCategories",n)}function G(){k(!C)}function U({target:e,currentTarget:t}){C&&e===t&&k(!1)}function W(){delete e.matchedFileCount,delete e.searchCategories,t({...e})}function q(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(a.b,{to:"/statistics",className:"btn icon-text-btn files-more-dropdown-btn",children:[Object(n.jsx)(b.a,{name:"stats",size:"24px"}),Object(n.jsx)("span",{children:"Statistics"})]}),Object(n.jsxs)("label",{className:"btn icon-text-btn dropdown-btn files-more-dropdown-btn files-import-btn",children:[Object(n.jsx)(b.a,{name:"upload",size:"24px"}),Object(n.jsx)("span",{children:"Import Files"}),Object(n.jsx)("input",{type:"file",onChange:A,className:"sr-only",accept:"application/pdf",multiple:!0})]})]})}function H(s){return Object(n.jsx)(x.a,{file:s,showLink:!0,children:Object(n.jsxs)(j.a,{toggle:{content:Object(n.jsx)(b.a,{name:"dots-vertical"}),title:"More",className:"btn icon-btn"},children:[Object(n.jsxs)("div",{className:"files-file-card-dropdown-group",children:[Object(n.jsx)("div",{className:"files-file-card-dropdown-group-title",children:"Reading Status"}),e.categories.slice(1).map(((i,a)=>Object(n.jsxs)("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn"+(s.status===i.id?" active":""),onClick:()=>function(s,n){const i=m.findIndex((e=>e.id===s)),a=m[i];n!==a.status&&("reset"===n?delete a.status:(a.status=n,"reading"===n&&(a.accessedAt=Date.now(),m.splice(i,1),m.unshift(a))),f([...m]),t({...e,categories:T(m)}),Object(o.d)(a))}(s.id,i.id),children:[Object(n.jsx)(b.a,{name:i.icon}),Object(n.jsx)("span",{children:i.name})]},a)))]}),Object(n.jsxs)("div",{className:"files-file-card-dropdown-group",children:[Object(n.jsxs)("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn",onClick:()=>{return e=s.id,void I({id:e,type:"reset",iconId:"reset",title:"Reset Progress?",message:"Are you sure you want to reset reading progress for this file?",action:"Reset"});var e},children:[Object(n.jsx)(b.a,{name:"reset"}),Object(n.jsx)("span",{children:"Reset Progress"})]}),Object(n.jsxs)("button",{className:"btn icon-text-btn dropdown-btn files-file-card-dropdown-btn",onClick:()=>{return e=s.id,void I({id:e,type:"remove",iconId:"trash",title:"Remove File?",message:"Are you sure you want to remove this file?",action:"Remove"});var e},children:[Object(n.jsx)(b.a,{name:"trash"}),Object(n.jsx)("span",{children:"Remove File"})]})]})]})},s.id)}function $(t){return Object(n.jsx)("ul",{className:`files-cards ${e.type}`,children:t.map((e=>e.loading?Object(n.jsx)(g,{},e.id):H(e)))})}return Object(i.useEffect)((()=>{z?async function(){const e=Object(r.b)(),s=await Object(o.c)(e);f(s),t({visibleCategory:"all",categories:T(s),sortBy:e.sortBy,sortOrder:e.sortOrder,type:e.layoutType,showCategories:e.showCategories}),Object(l.l)("Files")}():window.title="ModestRead"}),[z]),Object(i.useEffect)((()=>{async function e(e){"pdf"===e.type?async function(e){const t=await Object(l.g)(e.blob),[s,n]=await Promise.all([t.getMetadata(),Object(l.i)(t)]);delete e.loading,delete e.blob,Object.assign(e,{...Object(l.j)(s),coverImage:n,viewMode:"multi",pageCount:t.numPages}),f([...m]),Object(o.d)(e)}(e):"epub"===e.type&&async function(e){const{default:t}=await Promise.all([s.e(0),s.e(1)]).then(s.bind(null,142)),n=t(e.blob);await n.ready;const[i,a,c]=await Promise.all([n.loaded.metadata,n.locations.generate(1650),Object(l.d)(n)]);i.title&&(e.title=i.title),i.creator&&(e.author=i.creator),e.storedPosition=JSON.stringify(a),e.pageCount=n.locations.length(),e.coverImage=c,e.viewMode="single",delete e.loading,delete e.blob,f([...m]),Object(o.d)(e)}(e)}F&&(S(!1),async function(){for(const t of m)t.loading&&e(t)}())}),[F]),Object(i.useEffect)((()=>(window.addEventListener("drop",B),window.addEventListener("dragover",E),()=>{window.removeEventListener("drop",B),window.removeEventListener("dragover",E)})),[B,E]),z?e?Object(n.jsxs)("div",{className:"container",children:[m.length?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"files-header",children:[Object(n.jsx)("button",{className:"btn icon-btn files-sidebar-toggle-btn",onClick:G,title:"Toggle sidebar",children:Object(n.jsx)(b.a,{name:"menu",size:"24px"})}),Object(n.jsx)(d.a,{}),Object(n.jsx)("div",{className:"files-categories-container"+(C?" visible":""),onClick:U,children:Object(n.jsxs)("div",{className:"files-sidebar",children:[Object(n.jsx)("div",{className:"files-sidebar-title-container",children:Object(n.jsx)("span",{className:"files-sidebar-title",children:"ModestRead"})}),Object(n.jsx)("ul",{className:"files-categories",children:e.categories.map(((s,i)=>Object(n.jsx)("li",{children:Object(n.jsxs)("button",{className:"btn icon-text-btn files-category-btn"+(e.visibleCategory===s.id?" active":""),onClick:()=>function(s){s!==e.visibleCategory&&(t({...e,visibleCategory:s}),C&&k(!1))}(s.id),children:[Object(n.jsx)(b.a,{name:s.icon,size:"24px"}),Object(n.jsx)("span",{children:s.name}),Object(n.jsx)("span",{children:s.files.length})]})},i)))}),q(),Object(n.jsxs)(j.a,{toggle:{content:Object(n.jsx)(b.a,{name:"dots-vertical",size:"24px"}),title:"More",className:"btn icon-btn icon-btn-alt files-more-dropdown-toggle-btn"},body:{className:"files-more-dropdown"},children:[q(),Object(n.jsxs)("div",{className:"files-layout-setting",children:[Object(n.jsxs)("button",{className:"btn icon-text-btn files-layout-setting-item"+("grid"===e.type?" active":""),onClick:()=>Y("grid"),children:[Object(n.jsx)(b.a,{name:"grid",size:"24px"}),Object(n.jsx)("span",{children:"Grid"})]}),Object(n.jsxs)("button",{className:"btn icon-text-btn files-layout-setting-item"+("list"===e.type?" active":""),onClick:()=>Y("list"),children:[Object(n.jsx)(b.a,{name:"list",size:"24px"}),Object(n.jsx)("span",{children:"List"})]})]}),Object(n.jsxs)("label",{className:"checkbox-container files-show-categories-setting",children:[Object(n.jsx)("input",{type:"checkbox",className:"sr-only checkbox-input",onChange:J,checked:e.showCategories}),Object(n.jsx)("div",{className:"checkbox",children:Object(n.jsx)("div",{className:"checkbox-tick"})}),Object(n.jsx)("span",{className:"checkbox-label",children:"Show categories"})]})]})]})})]}),Object(n.jsxs)("div",{className:"files-top-bar",children:[Object(n.jsx)(v,{searchFiles:function(s){if(s){const n=m.filter((e=>{var t,n;return e.name.toLowerCase().includes(s)||(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(s))||(null===(n=e.artist)||void 0===n?void 0:n.toLowerCase().includes(s))}));t({...e,matchedFileCount:n.length,searchCategories:n.length?T(n):[]})}else W()},resetSearch:W}),Object(n.jsx)(N,{sortBy:e.sortBy,sortOrder:e.sortOrder,sortFileCatalog:function(s,n=1){if(s===e.sortBy&&n===e.sortOrder)return;const i=Object(o.e)(m,{sortBy:s,sortOrder:n});f(i),t({...e,sortBy:s,sortOrder:n,categories:T(i)}),Object(r.d)({sortBy:s,sortOrder:n})}})]}),O&&Object(n.jsx)(h.a,{notification:O,expandable:O.expandable,dismiss:D,margin:"top",children:O.files?Object(n.jsx)("ul",{className:"files-duplicate-files",children:O.files.map(((e,t)=>Object(n.jsx)("li",{className:"files-duplicate-file",children:e},t)))}):null}),function(){const t=e.searchCategories||e.categories;if("all"===e.visibleCategory&&e.showCategories)return 0===e.matchedFileCount?Object(n.jsx)("p",{className:"files-category-notice",children:"Your search term doesn't match any files."}):Object(n.jsx)("div",{children:t.slice(1).map(((e,t)=>e.files.length?Object(n.jsxs)("div",{className:"files-category",children:[Object(n.jsxs)("h3",{className:"files-category-name",children:[Object(n.jsx)(b.a,{name:e.icon,size:"24px"}),Object(n.jsx)("span",{children:e.name})]}),$(e.files)]},t):null))});const{files:s}=t.find((({id:t})=>t===e.visibleCategory));if(s.length)return $(s);const{files:i}=e.categories.find((({id:t})=>t===e.visibleCategory)),a=e.searchCategories&&i.length?"Your search term doesn't match any files in this category.":"You have no files in this category.";return Object(n.jsx)("p",{className:"files-category-notice",children:a})}()]}):Object(n.jsx)(p,{notification:O,dismiss:D,handleFileUpload:A}),L?Object(n.jsx)(y,{...L,resetProgress:function(){const s=m.find((e=>e.id===L.id));s.status="not started",s.pageNumber=1,"epub"===s.type&&delete s.location,delete s.accessedAt,delete s.scrollLeft,delete s.scrollTop,f([...m]),t({...e,categories:T(m)}),Object(o.d)(s),M()},removeFile:function(){const{id:s}=L,n=m.findIndex((e=>e.id===s));m.splice(n,1),f([...m]),t({...e,categories:T(m)}),Object(o.a)(s),M()},hide:M}):null]}):null:Object(n.jsx)(u,{hide:function(){R(!0)}})}},50:function(e,t,s){},61:function(e,t,s){"use strict";var n=s(3);s(50);t.a=function(){return Object(n.jsx)("div",{className:"header-title-container",children:Object(n.jsx)("h1",{className:"header-title",children:"ModestRead"})})}},77:function(e,t,s){},79:function(e,t,s){},81:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){},84:function(e,t,s){},85:function(e,t,s){}}]);