(this["webpackJsonpmodest-read"]=this["webpackJsonpmodest-read"]||[]).push([[7],{138:function(e,t,n){"use strict";var i,o=new Uint8Array(16);function c(){if(!i&&!(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(o)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var r=function(e){return"string"===typeof e&&a.test(e)},s=[],l=0;l<256;++l)s.push((l+256).toString(16).substr(1));var d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!r(n))throw TypeError("Stringified UUID is invalid");return n};t.a=function(e,t,n){var i=(e=e||{}).random||(e.rng||c)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=i[o];return t}return d(i)}},140:function(e,t,n){"use strict";n.r(t);var i=n(3),o=n(0),c=n(1),a=n(34),r=n(40),s=n(46);const l=new s.a("ModestKeep2","current-file");function d(){return Object(s.c)("file",l)}async function u(e){const t=await d();(null===t||void 0===t?void 0:t.name)!==e.name&&Object(s.e)("file",e,l)}var m=n(38),f=n(32),b=n(13),v=n(44),h=n(39),p=n(63),g=(n(83),n.p+"static/media/ring.a86521a9.svg");var j=function(){return Object(i.jsx)("div",{className:"viewer-spinner-mask",children:Object(i.jsx)("img",{src:g,alt:""})})};n(84);var w=function({file:e,loading:t,notification:n,dismissNotification:o,handleFileUpload:c,loadPreviewFile:a}){return Object(i.jsxs)("div",{className:"viewer-file-preview-container",children:[Object(i.jsx)(h.a,{}),Object(i.jsxs)("div",{className:"viewer-file-preview",children:["negative"===(null===n||void 0===n?void 0:n.type)&&Object(i.jsx)(v.a,{notification:n,margin:"bottom",dismiss:o}),Object(i.jsxs)(p.a,{file:e,children:[Object(i.jsx)(b.b,{to:"/",className:"btn icon-btn",title:"Back to files",children:Object(i.jsx)(f.a,{name:"bookshelf",size:"24px"})}),Object(i.jsxs)("label",{className:"btn viewer-file-preview-import-btn",children:[Object(i.jsx)("input",{type:"file",onChange:c,className:"sr-only",accept:"application/pdf, application/epub+zip"}),Object(i.jsx)("span",{children:"Select File"})]})]}),"warning"===(null===n||void 0===n?void 0:n.type)&&Object(i.jsxs)("div",{className:"viewer-file-preview-warning",children:[Object(i.jsxs)("div",{className:"viewer-file-preview-warning-main",children:[Object(i.jsx)(f.a,{name:"info",className:"viewer-file-preview-warning-icon",size:"24px"}),Object(i.jsx)("p",{className:"viewer-file-preview-warning-message",children:n.value})]}),Object(i.jsxs)("div",{className:"viewer-file-preview-warning-bottom",children:[Object(i.jsx)("button",{className:"btn text-btn viewer-file-preview-warning-btn",onClick:o,children:"No"}),Object(i.jsx)("button",{className:"btn viewer-file-preview-warning-btn",onClick:a,children:"Yes"})]})]}),t&&Object(i.jsx)(j,{})]})]})},x=n(43);n(85);var O=function({file:e}){return Object(i.jsxs)(x.a,{toggle:{content:Object(i.jsx)(f.a,{name:"info"}),title:"Information",className:"btn icon-btn icon-btn-alt"},body:{className:"file-info"},children:[Object(i.jsx)("div",{className:"file-info-image-container",children:Object(i.jsx)("img",{src:e.coverImage,className:"file-info-image",alt:""})}),Object(i.jsxs)("div",{className:"file-info-items",children:[function(){let t="";return e.title?(t=e.title,e.author&&(t+=` by ${e.author}`)):t=e.name,Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"file-info-item file-info-title"+(t===e.name?" filename":""),children:t}),t!==e.name&&Object(i.jsx)("div",{className:"file-info-item file-info-filename",children:e.name})]})}(),Object(i.jsxs)("div",{className:"file-info-item file-info-secondary",children:[Object(i.jsxs)("span",{children:[e.pageCount," pages"]}),Object(i.jsx)("span",{children:e.sizeString}),Object(i.jsx)("span",{children:e.type})]})]})]})};n(86);var y=function({file:e,filePreferences:t,setViewerSettings:n,updateFileSavePreference:c,handleFileUpload:a,exitViewer:r}){const[s,l]=Object(o.useState)((()=>Object(m.b)())),d=Object(o.useRef)(!1),u=Object(o.useRef)(e.scrollTop),b=Object(o.useRef)(e.scrollTop>0),v=Object(o.useRef)(null),h=Object(o.useRef)(0),p=Object(o.useRef)(!1),g=Object(o.useRef)(!1),j=Object(o.useRef)(!1),w=Object(o.useCallback)((function(){if(p.current)return;p.current=!0,requestAnimationFrame((()=>{const{scrollTop:e}=document.documentElement;if(e>u.current)d.current?d.current=!1:j.current||E();else if(!e||h.current>100)L();else{const t=u.current-e;h.current+=t}u.current=e,p.current=!1}))}),[e.viewMode]),y=Object(o.useCallback)((function(){if(p.current)return;p.current=!0,requestAnimationFrame((()=>{const{scrollTop:t}=document.documentElement;t<80?"multi"===e.viewMode&&L():b.current?E():"multi"===e.viewMode&&L(),p.current=!1}))}),[e.viewMode]);function L(){var e;(null===(e=v.current)||void 0===e?void 0:e.classList.contains("hidden"))&&(h.current=0,v.current.classList.remove("hidden"),setTimeout((()=>{v.current.classList.remove("hiding")}),200))}function E(){var e;(null===(e=v.current)||void 0===e?void 0:e.classList.contains("hidden"))||(h.current=0,v.current.classList.add("hiding"),setTimeout((()=>{v.current.classList.add("hidden")}),200))}function N(e){g.current||(g.current=!0,requestAnimationFrame((()=>{e.clientY<80&&e.clientX<document.documentElement.clientWidth?(j.current=!0,v.current.classList.contains("hidden")&&(v.current.classList.remove("hidden"),setTimeout((()=>{v.current.classList.remove("hiding")}),200))):j.current=!1,g.current=!1})))}function C({target:t}){t.closest(".viewer-toolbar")||t.closest(".btn")||t.closest("#js-viewer-outline")||(d.current=!1,"multi"===e.viewMode&&document.documentElement.scrollTop<40?b.current=!b.current:v.current.classList.contains("hidden")?(b.current=!1,L()):(b.current=!0,E()))}function k({target:e}){var t,i;t=e.name,i=e.checked,n(t,i),l({...s,[t]:i}),Object(m.c)(t,i)}return Object(o.useEffect)((()=>{if("epub"===e.type)return;return matchMedia("only screen and (hover: none) and (pointer: coarse)").matches?(v.current.classList.toggle("hiding",e.scrollTop>0),v.current.classList.toggle("hidden",e.scrollTop>0),window.addEventListener("pointerup",C),window.addEventListener("scroll",y),()=>{window.removeEventListener("pointerup",C),window.removeEventListener("scroll",y)}):(window.addEventListener("scroll",w),window.addEventListener("mousemove",N),()=>{window.removeEventListener("scroll",w),window.removeEventListener("mousemove",N)})}),[w,y]),Object(i.jsxs)("div",{className:"viewer-toolbar"+(s.keepToolbarVisible?" keep-visible":""),ref:v,children:[Object(i.jsxs)("div",{className:"view-toolbar-side",children:[Object(i.jsx)(O,{file:e}),Object(i.jsx)("button",{id:"js-viewer-outline-toggle-btn",className:"btn icon-btn viewer-outline-toggle-btn",title:"Toggle outline",children:Object(i.jsx)(f.a,{name:"outline"})}),Object(i.jsxs)("div",{className:"viewer-toolbar-zoom",children:[Object(i.jsx)("button",{id:"js-viewer-zoom-out",className:"btn icon-btn viewer-toolbar-tool-btn",title:"Zoom out",children:Object(i.jsx)(f.a,{name:"minus"})}),Object(i.jsxs)("select",{id:"js-viewer-scale-select",className:"input viewer-toolbar-zoom-select",children:[Object(i.jsx)("option",{value:"custom",style:{display:"none"}}),"pdf"===e.type&&Object(i.jsx)("option",{value:"fit-width",children:"Fit Width"}),"pdf"===e.type&&Object(i.jsx)("option",{value:"fit-page",children:"Fit Page"}),Object(i.jsx)("option",{value:"0.5",children:"50%"}),Object(i.jsx)("option",{value:"0.75",children:"75%"}),Object(i.jsx)("option",{value:"1",children:"100%"}),Object(i.jsx)("option",{value:"1.5",children:"150%"}),Object(i.jsx)("option",{value:"2",children:"200%"}),Object(i.jsx)("option",{value:"3",children:"300%"}),Object(i.jsx)("option",{value:"4",children:"400%"})]}),Object(i.jsx)("button",{id:"js-viewer-zoom-in",className:"btn icon-btn viewer-toolbar-tool-btn",title:"Zoom in",children:Object(i.jsx)(f.a,{name:"plus"})})]})]}),Object(i.jsxs)("div",{className:"view-toolbar-side",children:[Object(i.jsxs)("div",{className:"viewer-toolbar-page",children:[Object(i.jsx)("button",{id:"js-viewer-previous-page",className:"btn icon-btn viewer-toolbar-tool-btn",children:Object(i.jsx)(f.a,{name:"arrow-up"})}),Object(i.jsxs)("div",{id:"js-viewer-page-input-container",className:"viewer-toolbar-page-input-container",children:[Object(i.jsx)("input",{id:"js-viewer-page-input",type:"text",inputMode:"numeric",className:"input viewer-toolbar-page-input"}),Object(i.jsx)("span",{})]}),Object(i.jsx)("button",{id:"js-viewer-next-page",className:"btn icon-btn viewer-toolbar-tool-btn",children:Object(i.jsx)(f.a,{name:"arrow-down"})})]}),Object(i.jsxs)(x.a,{toggle:{content:Object(i.jsx)(f.a,{name:"dots-vertical"}),title:"More",className:"btn icon-btn icon-btn-alt"},body:{className:"viewer-toolbar-dropdown"},children:[Object(i.jsx)("div",{className:"viewer-toolbar-dropdown-group",children:Object(i.jsxs)("label",{className:"btn icon-text-btn dropdown-btn viewer-toolbar-dropdown-btn",children:[Object(i.jsx)(f.a,{name:"upload"}),Object(i.jsx)("span",{children:"Load File"}),Object(i.jsx)("input",{type:"file",onChange:a,className:"sr-only",accept:"application/pdf, application/epub+zip"})]})}),"pdf"===e.type&&Object(i.jsx)("div",{className:"viewer-toolbar-dropdown-group",children:Object(i.jsxs)("button",{id:"js-viewer-rotate-btn",className:"btn icon-text-btn dropdown-btn viewer-toolbar-dropdown-btn",children:[Object(i.jsx)(f.a,{name:"rotate"}),Object(i.jsx)("span",{children:"Rotate pages"})]})}),Object(i.jsxs)("div",{id:"js-viewer-view-modes",className:"viewer-toolbar-dropdown-group",children:["pdf"===e.type&&Object(i.jsxs)("button",{className:"btn icon-text-btn dropdown-btn viewer-toolbar-dropdown-btn viewer-view-mode-btn","data-mode":"multi",children:[Object(i.jsx)(f.a,{name:"pages"}),Object(i.jsx)("span",{children:"Multi page"})]}),Object(i.jsxs)("button",{className:"btn icon-text-btn dropdown-btn viewer-toolbar-dropdown-btn viewer-view-mode-btn","data-mode":"single",children:[Object(i.jsx)(f.a,{name:"page"}),Object(i.jsx)("span",{children:"Single page"})]}),"epub"===e.type&&Object(i.jsxs)("button",{className:"btn icon-text-btn dropdown-btn viewer-toolbar-dropdown-btn viewer-view-mode-btn","data-mode":"spread",children:[Object(i.jsx)(f.a,{name:"spread"}),Object(i.jsx)("span",{children:"Spread page"})]})]}),Object(i.jsxs)("div",{className:"viewer-toolbar-dropdown-group viewer-toolbar-settings",children:["pdf"===e.type?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("label",{className:"viewer-toolbar-settings-item",children:[Object(i.jsx)("input",{type:"checkbox",className:"sr-only checkbox-input",name:"invertColors",onChange:k,checked:s.invertColors}),Object(i.jsx)("div",{className:"checkbox",children:Object(i.jsx)("div",{className:"checkbox-tick"})}),Object(i.jsx)("span",{className:"checkbox-label",children:"Invert page colors."})]}),Object(i.jsxs)("label",{className:"viewer-toolbar-settings-item",children:[Object(i.jsx)("input",{type:"checkbox",className:"sr-only checkbox-input",name:"keepToolbarVisible",onChange:k,checked:s.keepToolbarVisible}),Object(i.jsx)("div",{className:"checkbox",children:Object(i.jsx)("div",{className:"checkbox-tick"})}),Object(i.jsx)("span",{className:"checkbox-label",children:"Keep toolbar visible."})]})]}):Object(i.jsxs)("div",{className:"viewer-toolbar-settings-item viewer-theme-setting",children:[Object(i.jsx)("div",{className:"viewer-toolbar-setting-name",children:"Themes"}),Object(i.jsxs)("div",{id:"js-viewer-themes",className:"viewer-themes",children:[Object(i.jsx)("button",{className:"btn viewer-theme-btn black","data-theme":"black",children:"A"}),Object(i.jsx)("button",{className:"btn viewer-theme-btn white","data-theme":"white",children:"A"}),Object(i.jsx)("button",{className:"btn viewer-theme-btn grey","data-theme":"grey",children:"A"}),Object(i.jsx)("button",{className:"btn viewer-theme-btn orange","data-theme":"orange",children:"A"})]})]}),t.hideWarning&&Object(i.jsxs)("label",{className:"viewer-toolbar-settings-item",children:[Object(i.jsx)("input",{type:"checkbox",className:"sr-only checkbox-input",onChange:c,checked:t.saveLoadedFile}),Object(i.jsx)("div",{className:"checkbox",children:Object(i.jsx)("div",{className:"checkbox-tick"})}),Object(i.jsx)("span",{className:"checkbox-label",children:"Save loaded file."})]})]}),Object(i.jsxs)("button",{className:"btn icon-text-btn viewer-toolbar-dropdown-btn",onClick:function(){window.removeEventListener("scroll",w),window.removeEventListener("mousemove",N),r()},title:"Exit",children:[Object(i.jsx)(f.a,{name:"exit"}),Object(i.jsx)("span",{children:"Exit Viewer"})]})]})]})]})};n(87);var L=function({message:e,filePreferences:t,saveFileLoadModalFile:n,hideFileLoadModal:c,hideFileLoadMessage:a}){const[r,s]=Object(o.useState)(!1),l=Object(o.useRef)(0);function d(e){const i={...t,hideWarning:r,saveLoadedFile:e};var o;e?n(i):c(i),r&&(o=i,localStorage.setItem("file-preferences",JSON.stringify(o)))}return Object(o.useEffect)((()=>{if(clearTimeout(l.current),e.duration)return l.current=setTimeout((()=>{a()}),e.duration),()=>{clearTimeout(l.current)}}),[e]),"negative"===e.type?Object(i.jsx)(v.a,{notification:e,className:"viewer-file-load-modal viewer-notification",dismiss:a}):"warning"!==e.type||t.hideWarning?null:Object(i.jsxs)("div",{className:"viewer-file-load-modal viewer-file-load-warning",children:[Object(i.jsxs)("div",{className:"viewer-file-load-warning-mesasge-container",children:[Object(i.jsx)(f.a,{name:"info",size:"24px"}),Object(i.jsx)("p",{className:"viewer-file-load-warning-mesasge",children:e.value})]}),Object(i.jsxs)("label",{className:"checkbox-container viewer-file-load-warning-checkbox-container",children:[Object(i.jsx)("input",{type:"checkbox",className:"sr-only checkbox-input",onChange:function({target:e}){s(e.checked)},checked:r}),Object(i.jsx)("div",{className:"checkbox",children:Object(i.jsx)("div",{className:"checkbox-tick"})}),Object(i.jsx)("span",{className:"checkbox-label",children:"Don't show this message again."})]}),Object(i.jsxs)("div",{className:"viewer-file-load-warning-bottom",children:[Object(i.jsx)("button",{className:"btn text-btn",onClick:function(){d(!1)},children:"No"}),Object(i.jsx)("button",{className:"btn viewer-file-load-warning-btn",onClick:function(){d(!0)},children:"Yes"})]})]})};n(88);var E=function(){return Object(i.jsxs)("div",{className:"no-file-notice",children:[Object(i.jsx)(h.a,{}),Object(i.jsx)("p",{className:"no-file-notice-message",children:"File not found."}),Object(i.jsxs)(b.b,{to:"/",className:"btn icon-text-btn primary-btn",children:[Object(i.jsx)(f.a,{name:"bookshelf",size:"24px"}),Object(i.jsx)("span",{children:"Back to Files"})]})]})},N=n(138);class C{constructor(e,t,n){this.pdfDocument=e,this.pdfElement=t,this.url=n}navigateTo(e){this.goToDestination(e)}async goToDestination(e){let t=null;t="string"===typeof e?await this.pdfDocument.getDestination(e):e;const n=await this.pdfDocument.getPageIndex(t[0]);Object(a.k)(n+1,this.pdfElement.children,{keepToolbarVisible:Object(m.a)("keepToolbarVisible")})}getDestinationHash(e){if("string"===typeof e&&e.length)return this.getAnchorUrl(`#${escape(e)}`);if(Array.isArray(e)){const t=JSON.stringify(e);if(t.length)return this.getAnchorUrl(`#${escape(t)}`)}return this.getAnchorUrl("")}getAnchorUrl(e){return this.url+e}}let k=null,V=null,M=!1,H=!1;async function A(e,t){const n=await e(),i=document.getElementById("js-viewer-outline"),o=document.getElementById("js-viewer-outline-toggle-btn");V=t,i.firstElementChild&&(o.removeEventListener("click",T),i.firstElementChild.remove()),i.classList.remove("visible"),i.removeEventListener("click",S),o.classList.toggle("visible",n.length),n.length&&o.addEventListener("click",T),k=n,H=!1,M=!1}async function T(){const e=document.getElementById("js-viewer-outline");if(M=!M,!H){const t=document.createElement("div");t.classList.add("viewer-outline"),e.append(t),I(k,t),e.addEventListener("click",S),H=!0}e.classList.toggle("visible",M)}function S(e){if(e.target===e.currentTarget)return M=!1,void e.currentTarget.classList.remove("visible");const{nodeName:t}=e.target;"A"===t?(V(e.target.href),e.preventDefault()):"BUTTON"===t&&(e.target.classList.toggle("rotated"),e.target.parentElement.nextElementSibling.classList.toggle("visible"))}function I(e,t){const n=new DocumentFragment;for(const i of e){const e=document.createElement("div"),o=document.createElement("a");if(e.classList.add("viewer-outline-item"),o.classList.add("viewer-outline-link"),o.textContent=i.title,o.href=i.href,i.items.length){const n=document.createElement("div"),i=document.createElement("button");i.innerHTML="&#x25BE",i.classList.add("btn","icon-btn","viewer-outline-tree-toggle-btn"),n.append(i),n.append(o),e.append(n),t.classList.add("has-inner-tree")}else e.append(o);if(i.items.length){const t=document.createElement("div");t.classList.add("viewer-outline-inner-tree"),I(i.items,t),e.append(t)}n.append(e)}t.append(n)}const B=Object(m.b)(),$=1.3333;let z=null,F=null,P=null,D=null,Z=[],R=[],U=null,W=null,J=0,K=1,q=!0,_=!1,Y=!1,G=!1,X=!1;async function Q(e,{metadata:t,blob:i,save:o=!0}){var c;z=await Promise.all([n.e(0),n.e(3),n.e(2)]).then(n.t.bind(null,59,7)),F=e,P=await Object(a.g)(i),D=t,(c=D).scale||(c.scale=Ze()),W=D.scale,J=t.rotation||0,K=t.pageNumber||1,document.body.style.overscrollBehavior="none";const[s]=await Promise.all([ze(P,t.rotation),"multi"===t.viewMode?De(F,P,t):Fe(F,P,t)]);R=s,function(e){const t=document.getElementById("js-viewer-zoom-out"),n=document.getElementById("js-viewer-zoom-in");ke(e),t.addEventListener("click",Ce),n.addEventListener("click",Ne),document.getElementById("js-viewer-scale-select").addEventListener("change",He)}(W),function(){const e=document.getElementById("js-viewer-previous-page"),t=document.getElementById("js-viewer-next-page"),n=document.getElementById("js-viewer-page-input-container"),i=document.getElementById("js-viewer-page-input");n.lastElementChild.textContent=`of ${D.pageCount}`,xe(K),Oe(K),n.addEventListener("click",oe),e.addEventListener("click",Le),t.addEventListener("click",Ee),i.addEventListener("focus",ce),i.addEventListener("blur",ae),i.addEventListener("keydown",re)}(),A(fe,be),te(o);const[l,d]=document.getElementById("js-viewer-view-modes").children;"multi"===t.viewMode?(Z=Se(),l.classList.add("active"),window.addEventListener("scroll",ne),ve()):(we(K),ee(),d.classList.add("active"),window.addEventListener("scroll",ie),window.addEventListener("click",se)),window.addEventListener("keydown",le),window.addEventListener("keyup",de),window.addEventListener("wheel",ue,{passive:!1}),document.getElementById("js-viewer-rotate-btn").addEventListener("click",Te),document.getElementById("js-viewer-view-modes").addEventListener("click",Ae),window.scrollTo(t.scrollLeft,t.scrollTop),o&&("have read"!==t.status&&(1===t.pageCount?t.status="have read":t.status="reading"),t.accessedAt=Date.now(),Object(r.d)(t),u(i))}function ee(){const e=document.getElementById("js-viewer-nav-previous-btn"),t=document.getElementById("js-viewer-nav-next-btn");e.classList.add("visible"),t.classList.add("visible"),e.addEventListener("click",Le),t.addEventListener("click",Ee)}function te(e){q=e}function ne(){G||(G=!0,requestAnimationFrame((()=>{const{scrollTop:e,scrollLeft:t}=document.documentElement,n=K;D.scrollTop=e<0?0:e,D.scrollLeft=t,K=function(e,t){for(let n=0;n<e.length-1;n+=1){const i=e[n],o=e[n+1],c=i.top+i.height/2,a=o.top+o.height/2;if(t>=c&&t<=a)return n+2}return 1}(Z,D.scrollTop),D.pageNumber=K,q&&(clearTimeout(X),X=setTimeout((()=>{Object(r.d)(D)}),1e3)),K!==n&&(xe(K),Oe(K)),G=!1})))}function ie(){G||(G=!0,requestAnimationFrame((()=>{const{scrollTop:e,scrollLeft:t}=document.documentElement;D.scrollTop=e<0?0:e,D.scrollLeft=t,q&&(clearTimeout(X),X=setTimeout((()=>{Object(r.d)(D)}),1e3)),G=!1})))}function oe(e){e.target!==e.currentTarget.firstElementChild&&e.currentTarget.firstElementChild.focus()}function ce({target:e}){const{pageCount:t}=D,n=t<1e3?3:t.toString().length;e.style.width=`${n}ch`,e.select()}function ae({target:e}){const{pageNumber:t,pageCount:n}=D;let i=parseInt(e.value,10);if(Number.isNaN(i))return e.value=t,void(e.style.width=`${t.toString().length}ch`);i<1?i=1:i>n&&(i=n),e.style.width=`${i.toString().length}ch`,ye(i,!1)}function re(e){"Enter"===e.key&&e.target.blur()}function se({target:e}){"A"===e.nodeName&&e.classList.contains("internalLink")&&be(e.href)}function le(e){if("INPUT"===e.target.nodeName)return;if(Y=e.ctrlKey,e.ctrlKey)return"+"===e.key&&(Ne(),e.preventDefault()),void("-"===e.key&&(Ce(),e.preventDefault()));const{scrollWidth:t,offsetWidth:n}=document.documentElement;t<=n&&("ArrowLeft"===e.key?ye(K-1):"ArrowRight"===e.key&&ye(K+1))}function de(e){Y=e.ctrlKey}function ue(e){Y&&(e.preventDefault(),e.wheelDelta>0?Ne():Ce())}function me(e){const t=new C(P,F,window.location.href);return{title:e.title,href:t.getDestinationHash(e.dest),items:e.items.map(me)}}async function fe(){const e=await P.getOutline();return e?e.map(me):[]}async function be(e){const t=new URL(e);if(t.origin!==window.location.origin)return;const n=t.hash.split("#"),i=unescape(n[n.length-1]);let o="";try{o=JSON.parse(i)}catch{o=await P.getDestination(i)}ye(await P.getPageIndex(o[0])+1)}function ve(){U&&U.disconnect();const e=Z[K-1].height/2;U=new IntersectionObserver(pe,{rootMargin:`${e}px 0px`}),Array.from(F.children).forEach((e=>{U.observe(e)}))}function he(){U&&(U.disconnect(),U=null)}function pe(e){e.forEach((({isIntersecting:e,target:t})=>{!e||t.hasAttribute("data-loaded")&&!t.hasAttribute("data-rerender-needed")||(t.setAttribute("data-loaded","true"),ge(t))}))}async function ge(e){const t=parseInt(e.getAttribute("data-page-number"),10),{width:n,height:i}=Ie(t-1,W.currentScale),o=document.createElement("canvas");let c=null,a=null;o.classList.add("viewer-page-canvas"),e.hasAttribute("data-rerender-needed")?([a,c]=e.children,c.innerHTML="",e.removeAttribute("data-rerender-needed")):(c=document.createElement("div"),c.classList.add("viewer-page-text"),e.appendChild(o),e.appendChild(c));const r=await P.getPage(t),s=r.getViewport({scale:W.currentScale,rotation:(J+r.rotate)%360});o.width=n,o.height=i,c.style.width=`${n}px`,c.style.height=`${i}px`,await r.render({canvasContext:o.getContext("2d"),enableWebGL:!0,viewport:s}).promise,requestAnimationFrame((async()=>{z.renderTextLayer({textContent:await r.getTextContent(),container:c,viewport:s,textDivs:[]}),async function(e,t,n){const i=await t.getAnnotations(),o=n.children[2];if(!i.length)return void(o&&o.remove());const c={page:t,annotations:i,viewport:e.clone({dontFlip:!0}),div:o,linkService:new C(P,F,window.location.href)};if(o&&"multi"===D.viewMode)z.AnnotationLayer.update(c);else{const e=document.createElement("div");e.className="viewer-annotation-layer",n.appendChild(e),c.div=e,z.AnnotationLayer.render(c),o&&o.remove()}}(s,r,e)})),a&&e.replaceChild(o,a)}function je(e){for(const[t,n]of Object.entries(F.children)){const{width:i,height:o}=Ie(t,e);if(n.style.width=`${i}px`,n.style.height=`${o}px`,n.hasAttribute("data-loaded")){const e=n.firstElementChild,{width:t}=e;i===t?(e.style.width="",e.style.height="",n.removeAttribute("data-rerender-needed")):(e.style.width=`${i}px`,e.style.height=`${o}px`,n.setAttribute("data-rerender-needed",!0))}}}function we(e){!function(e){const{width:t,height:n}=Ie(e-1,W.currentScale),i=F.firstElementChild;if(i.style.width=`${t}px`,i.style.height=`${n}px`,i.setAttribute("data-page-number",e),i.hasAttribute("data-loaded")){const e=i.firstElementChild;e.style.width=`${t}px`,e.style.height=`${n}px`,i.setAttribute("data-rerender-needed",!0)}}(e),ge(F.firstElementChild),F.firstElementChild.setAttribute("data-loaded","true")}function xe(e){const t=document.getElementById("js-viewer-page-input");t.value=e,t.style.width=`${e.toString().length}ch`}function Oe(e){const t=document.getElementById("js-viewer-previous-page"),n=document.getElementById("js-viewer-next-page");1===e?t.disabled=!0:e===D.pageCount?n.disabled=!0:(t.disabled=!1,n.disabled=!1)}function ye(e,t=!0){"multi"===D.viewMode?Object(a.k)(e,F.children,{keepToolbarVisible:B.keepToolbarVisible}):(K=e,D.pageNumber=K,we(e),window.scrollTo(0,0),t&&xe(e),Oe(e),q&&Object(r.d)(D))}function Le(){ye(K-1)}function Ee(){ye(K+1)}function Ne(){Ve(Math.min(1.1*W.currentScale,13.333))}function Ce(){Ve(Math.max(W.currentScale/1.1,.333325))}function ke(e){const t=document.getElementById("js-viewer-scale-select");t.value=e.name,t.firstElementChild.textContent=`${e.displayValue}%`}function Ve(e,t="custom"){const n=W.currentScale;if(W.name=t,W.currentScale=e,W.displayValue=Math.round(100*e/$),D.scale=W,"multi"===D.viewMode){const{top:t}=Object(a.f)(K,F.children);je(e),Z=Se(),D.scrollTop=Z[K-1].top-t/n*e,D.scrollLeft=D.scrollLeft/n*e,ve()}else we(K),D.scrollTop=D.scrollTop/n*e,D.scrollLeft=D.scrollLeft/n*e;ke(W),window.scrollTo(D.scrollLeft,D.scrollTop),q&&Object(r.d)(D)}function Me(e){const t="single"===D.viewMode,{keepToolbarVisible:n}=B;return e-(n||1===K||t?56:16)}async function He({target:e}){const{value:t}=e;let n=0;if("fit-width"===t){const{offsetWidth:e,scrollHeight:t,offsetHeight:i}=document.documentElement,{width:o,height:c}=await Be(P,{pageNumber:K,rotation:J}),r=Me(i);let s=e-16,l=0;if(n=s/o,Math.round(n*o)>=s){const e=Math.round(n*c);t>i?"multi"===D.viewMode&&D.pageCount*e>i?l=0:e<r&&(l=Object(a.h)()):e>r&&(l=-Object(a.h)())}s+=l,n=s/o}else if("fit-page"===t){const{scrollWidth:e,offsetWidth:t,offsetHeight:i}=document.documentElement,{width:o,height:c}=await Be(P,{pageNumber:K,rotation:J}),r=t-16;let s=Me(i),l=0;if(n=s/c,Math.round(n*c)>=s){const i=Math.round(n*o);e>t?i<r&&(l=Object(a.h)()):i>r&&(l=-Object(a.h)())}s+=l,n=s/c}else n=$*t;Ve(n,t)}async function Ae(e){const t=Object(a.c)("data-mode",e.target,e.currentTarget);if(!t)return;const{attrValue:n}=t;if(n===D.viewMode)return;const[i,o]=e.currentTarget.children;i.classList.toggle("active"),o.classList.toggle("active"),D.viewMode=n,F.innerHTML="","multi"===n?(await De(F,P,D),Z=Se(),Object(a.k)(K,F.children,{keepToolbarVisible:B.keepToolbarVisible,scrollLeft:0}),ve(),function(){const e=document.getElementById("js-viewer-nav-previous-btn"),t=document.getElementById("js-viewer-nav-next-btn");e.classList.remove("visible"),t.classList.remove("visible"),e.removeEventListener("click",Le),t.removeEventListener("click",Ee)}(),window.addEventListener("scroll",ne),window.removeEventListener("scroll",ie),window.removeEventListener("click",se)):(he(),await Fe(F,P,D),we(K),window.scrollTo(0,0),ee(),window.addEventListener("scroll",ie),window.addEventListener("click",se),window.removeEventListener("scroll",ne)),q&&Object(r.d)(D)}function Te(){const e=J+90;J=360===e?0:e,D.rotation=J,_=!_,"multi"===D.viewMode?(je(W.currentScale),Z=Se(),ve(),Object(a.k)(K,F.children,{keepToolbarVisible:B.keepToolbarVisible})):(we(K),window.scrollTo(0,0)),q&&Object(r.d)(D)}function Se(){return Array.from(F.children).map((e=>({top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight})))}function Ie(e,t){const n=R[e];let i=Math.floor(n.width*t),o=Math.floor(n.height*t);return _&&([i,o]=[o,i]),{width:i,height:o}}async function Be(e,{pageNumber:t,scale:n={currentScale:1},rotation:i=0}){const o=await e.getPage(t);return o.getViewport({scale:n.currentScale,rotation:i+o.rotate})}async function $e(e,t){const{width:n,height:i}=await Be(e,t),o=document.createElement("div");return o.style.width=`${Math.floor(n)}px`,o.style.height=`${Math.floor(i)}px`,o.setAttribute("data-page-number",t.pageNumber),o.classList.add("viewer-page"),o}async function ze(e,t){const n=[];for(let i=0;i<e.numPages;i+=1){const{width:o,height:c}=await Be(e,{pageNumber:i+1,rotation:t});n.push({width:o,height:c})}return n}async function Fe(e,t,n){const i=await $e(t,n);e.appendChild(i)}async function Pe(e,t,n,i){const o=await $e(i,{...t,pageNumber:e});n.appendChild(o)}async function De(e,t,n){const i=new DocumentFragment,o=[];for(let c=0;c<t.numPages;c+=1)o.push(Pe(c+1,n,i,t));await Promise.all(o),e.appendChild(i)}function Ze(){return{name:"1",currentScale:$}}let Re=null,Ue=null,We=null,Je=null,Ke=null,qe=0,_e=!0,Ye="",Ge=null,Xe="";async function Qe(e,{metadata:t,blob:i,save:o=!0}){const{default:c}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,139));Re=c(i),We=t,Je=t.scale||{name:"1",currentScale:1},Ke=e,Ue=wt(t.viewMode),document.getElementById("js-viewer-themes").addEventListener("click",tt),function(e){const t=document.getElementById("js-viewer-zoom-out"),n=document.getElementById("js-viewer-zoom-in");bt(e),t.addEventListener("click",ht),n.addEventListener("click",vt),document.getElementById("js-viewer-scale-select").addEventListener("change",pt)}(Je),function(e,t){const n=document.getElementById("js-viewer-previous-page"),i=document.getElementById("js-viewer-next-page"),o=document.getElementById("js-viewer-page-input-container"),c=document.getElementById("js-viewer-page-input");st(e),function(){const e=document.getElementById("js-viewer-nav-previous-btn"),t=document.getElementById("js-viewer-nav-next-btn");e.classList.add("visible"),t.classList.add("visible"),e.addEventListener("click",mt),t.addEventListener("click",ft)}(),o.lastElementChild.textContent=`of ${t}`,o.addEventListener("click",xt),n.addEventListener("click",mt),i.addEventListener("click",ft),c.addEventListener("focus",Ot),c.addEventListener("blur",yt),c.addEventListener("keydown",Lt)}(t.pageNumber,t.pageCount),function(e){const[t,n]=document.getElementById("js-viewer-view-modes").children;"single"===e?t.classList.add("active"):n.classList.add("active");document.getElementById("js-viewer-view-modes").addEventListener("click",jt)}(t.viewMode),A(ut,lt),await Re.ready,t.storedPosition?await Re.locations.load(t.storedPosition):(await Re.locations.generate(1650),t.storedPosition=Re.locations.save(),t.pageCount=Re.locations.length()),t.pageNumber=t.location?Re.locations.locationFromCfi(t.location)+1:1,Ue.on("relocated",ot),Ue.on("keydown",ct),Ue.on("click",at),Ue.display(t.location),rt(o),window.addEventListener("keydown",Et),window.addEventListener("dropdown-visible",et),o&&("have read"!==t.status&&(1===t.pageCount?t.status="have read":t.status="reading"),t.accessedAt=Date.now(),Object(r.d)(t),u(i))}function et({detail:e}){Ye=e.id,Ge=e.hide}function tt(e){const t=Object(a.c)("data-theme",e.target,e.currentTarget);t&&(We.theme=t.attrValue,it(),_e&&(clearTimeout(qe),qe=setTimeout((()=>{Object(r.d)(We)}),1e3)))}function nt(e){for(const n of e.document.styleSheets)for(const e of n.rules){var t;if((null===(t=e.style)||void 0===t?void 0:t.fontSize)&&"html"!==e.selectorText)if(e.style.fontSize.endsWith("pt")){const t=Math.round(1.3333*Number.parseFloat(e.style.fontSize))/16;e.style.fontSize=`${t}rem`}else if(e.style.fontSize.endsWith("px")){const t=Number.parseFloat(e.style.fontSize)/16;e.style.fontSize=`${t}rem`}else if(e.style.fontSize.endsWith("%")){const t=Number.parseFloat(e.style.fontSize)/100;e.style.fontSize=`${t}rem`}else if(e.style.fontSize.endsWith("em"))e.style.fontSize=`${Number.parseFloat(e.style.fontSize)}rem`;else{const t={"xx-small":"0.5625","x-small":"0.625",small:"0.8333",medium:"1",large:"1.125","x-large":"1.5","xx-large":"2","xxx-large":"3"};t[e.style.fontSize]&&(e.style.fontSize=`${t[e.style.fontSize]}rem`)}}}function it(){const{theme:e}=We;if(!e)return;const t={black:{body:{color:"white","background-color":"black"}},white:{body:{color:"black","background-color":"white"}},grey:{body:{color:"white","background-color":"#1d1c1b"}},orange:{body:{color:"black","background-color":"#FBF0D9"}}};Ue.getContents().forEach((e=>e.addStylesheetRules(t[We.theme]))),Xe&&Ke.firstElementChild.classList.remove(`theme-${Xe}`),Ke.firstElementChild.classList.add(`theme-${We.theme}`),Xe=We.theme}function ot(e){const{cfi:t,location:n,index:i}=e.start,o=n+1;We.location=t,We.pageNumber=Re.locations.locationFromCfi(t)+1,st(o),function(e,t,{location:n,index:i,atStart:o}){const c=document.getElementById("js-viewer-previous-page"),a=document.getElementById("js-viewer-next-page");o||0===n&&0===i?c.disabled=!0:e===t||"spread"===We.viewMode&&n+2===t?a.disabled=!0:(c.disabled=!1,a.disabled=!1)}(o,Re.locations.length(),{location:n,index:i,atStart:e.atStart}),_e&&(clearTimeout(qe),qe=setTimeout((()=>{Object(r.d)(We)}),1e3))}function ct(e){e.ctrlKey&&document.activeElement.blur()}function at(){Ye&&(Ye="",Ge())}function rt(e){_e=e}function st(e){const t=document.getElementById("js-viewer-page-input");t.value=e,t.style.width=`${e.toString().length}ch`}function lt(e){Ue.display(e.split(/viewer\/.*?\//g)[1])}function dt(e){return{title:e.label,href:`${window.location.href}/${e.href}`,items:e.subitems.map(dt)}}async function ut(){const e=await Re.loaded.navigation;return Array.isArray(e.toc)?e.toc.map(dt):[]}function mt(){Ue.prev()}function ft(){Ue.next()}function bt(e){const t=document.getElementById("js-viewer-scale-select");t.value=e.name,t.firstElementChild.textContent=`${e.displayValue}%`}function vt(){gt(Math.min(1.1*Je.currentScale,13.333))}function ht(){gt(Math.max(Je.currentScale/1.1,.333325))}async function pt({target:e}){const{value:t}=e;gt(t,t)}function gt(e,t="custom"){Je.name=t,Je.currentScale=e,Je.displayValue=Math.round(100*e),We.scale=Je,bt(Je),Ue.themes.default({html:{"font-size":100*e+"% !important"}}),_e&&Object(r.d)(We)}function jt(e){const t=Object(a.c)("data-mode",e.target,e.currentTarget);if(!t)return;const{attrValue:n}=t;if(n===We.viewMode)return;const[i,o]=e.currentTarget.children;i.classList.toggle("active"),o.classList.toggle("active"),We.viewMode=n,Ke.innerHTML="",Ue.off("relocated",ot),Ue=wt(n),Ue.on("relocated",ot),Ue.on("keydown",ct),Ue.on("click",at),Ue.display(We.location),_e&&Object(r.d)(We)}function wt(e){const t={flow:"paginated",height:document.documentElement.offsetHeight-40};"single"===e&&(t.spread="none");const n=Re.renderTo(Ke,t);return n.hooks.content.register(nt),n.hooks.content.register(it),n.themes.default({html:{"font-size":100*Je.currentScale+"% !important"},"::selection":{"background-color":"hsla(260, 48%, 52%, 0.4)"}}),n}function xt(e){e.target!==e.currentTarget.firstElementChild&&e.currentTarget.firstElementChild.focus()}function Ot({target:e}){const{pageCount:t}=We,n=t<1e3?3:t.toString().length;e.style.width=`${n}ch`,e.select()}function yt({target:e}){const{location:t,pageCount:n}=We,i=Re.locations.locationFromCfi(t);let o=parseInt(e.value,10);if(Number.isNaN(o))return e.value=i,void(e.style.width=`${i.toString().length}ch`);o<1?o=1:o>n&&(o=n);const c=Re.locations.cfiFromLocation(o);e.style.width=`${o.toString().length}ch`,Ue.display(c)}function Lt(e){"Enter"===e.key&&e.target.blur()}function Et(e){if("INPUT"!==e.target.nodeName)return e.ctrlKey?("+"===e.key&&(vt(),e.preventDefault()),void("-"===e.key&&(ht(),e.preventDefault()))):void("ArrowLeft"===e.key?mt():"ArrowRight"===e.key&&ft())}n(89);t.default=function(){var e;const t=Object(c.f)(),{id:s}=Object(c.g)(),[l,b]=Object(o.useState)({}),[v,h]=Object(o.useState)((()=>JSON.parse(localStorage.getItem("file-preferences"))||{})),[p,g]=Object(o.useState)((()=>Object(m.b)())),[x,O]=Object(o.useState)(null),C=Object(o.useRef)(null),k=Object(o.useRef)(!1),V=Object(o.useCallback)((function(e){if(e.preventDefault(),e.dataTransfer.files.length){const[t]=e.dataTransfer.files;S(t)}}),[l,v,x]);function M(e){e.preventDefault()}function H(e){const[t]=e.target.files;S(t),e.target.value=""}function A(e,t){var n;k.current=!0,(n=t.metadata).type||(n.type="pdf"),"pdf"===t.metadata.type?Q(e,t):"epub"===t.metadata.type&&Qe(e,t)}function T(){l.file&&("pdf"===l.file.type?(he(),F&&(F.innerHTML=""),P=null,document.body.style.overscrollBehavior="",window.removeEventListener("scroll",ne),window.removeEventListener("scroll",ie),window.removeEventListener("keydown",le),window.removeEventListener("keyup",de),window.removeEventListener("wheel",ue,{passive:!1})):"epub"===l.file.type&&(Ke&&(Ke.innerHTML=""),window.removeEventListener("keydown",Et),window.removeEventListener("dropdown-visible",et)))}async function S(e){l.file&&(["pdf","epub"].includes(l.file.type)?e.name===l.file.name?l.filePreviewVisible?(A(C.current,{blob:e,metadata:l.file,save:!0}),B(),b({file:l.file})):O({type:"negative",value:"File is already loaded.",duration:4e3}):l.filePreviewVisible?O({file:e,type:"warning",value:"File does not match currently loaded file.\nDo you want to load it anyway?"}):I({file:e}):O({type:"negative",value:"File format is not supported.",duration:4e3}))}async function I({file:e}){b({...l,loading:!0});let i=await async function(e){return(await Object(r.c)()).find((({name:t})=>t===e.name))}(e),o=!0;if(!i){const t=e.name.slice(e.name.lastIndexOf(".")+1);"pdf"===t?i=await async function(e){P=await Object(a.g)(e);const[t,n]=await Promise.all([P.getMetadata(),Object(a.i)(P)]);return{...Object(a.j)(t),id:Object(N.a)(),name:e.name,type:"pdf",createdAt:Date.now(),scale:Ze(),size:e.size,sizeString:Object(a.e)(e.size),pageNumber:1,pageCount:P.numPages,viewMode:"multi",coverImage:n}}(e):"epub"===t&&(i=await async function(e){const{default:t}=await Promise.all([n.e(0),n.e(1)]).then(n.bind(null,139));Re=t(e),await Re.ready;const[i,o,c]=await Promise.all([Re.loaded.metadata,Re.locations.generate(1650),Object(a.d)(Re)]),r={storedPosition:JSON.stringify(o),coverImage:c,id:Object(N.a)(),name:e.name,type:"epub",createdAt:Date.now(),scale:{name:"1",currentScale:1},size:e.size,sizeString:Object(a.e)(e.size),pageNumber:1,pageCount:Re.locations.length(),viewMode:"single"};return i.title&&(r.title=i.title),i.creator&&(r.author=i.creator),r}(e)),l.filePreviewVisible||(v.hideWarning?o=v.saveLoadedFile:(o=!1,O({file:e,type:"warning",value:"Do you want to save this file?"})))}!function(e,t){k.current&&T(),A(e,t)}(C.current,{metadata:i,blob:e,save:o}),t.replace({pathname:`/viewer/${i.id}`,state:!0}),Object(a.l)(i.name),b({file:i})}function B(){O(null)}function $(e){var t;t=e.saveLoadedFile,"pdf"===l.file.type?te(t):"epub"===l.file.type&&rt(t),h(e),B()}return Object(o.useLayoutEffect)((()=>T()),[]),Object(o.useLayoutEffect)((()=>{!async function(){if(t.location.state)return;const e=await Object(r.b)(s);if(e){const t=await d();e.type||(e.type="pdf"),t&&t.name===e.name?(A(C.current,{blob:t,metadata:e}),b({file:e})):b({file:e,filePreviewVisible:!0}),Object(a.l)(e.name)}else b({error:!0}),Object(a.l)("Error")}()}),[s]),Object(o.useEffect)((()=>(window.addEventListener("drop",V),window.addEventListener("dragover",M),()=>{window.removeEventListener("drop",V),window.removeEventListener("dragover",M)})),[V]),Object(o.useEffect)((()=>{if(l.file){if("single"===l.file.viewMode&&"pdf"===l.file.type){if(matchMedia("only screen and (hover: none) and (pointer: coarse)").matches&&!p.keepToolbarVisible)return void C.current.classList.remove("offset")}C.current.classList.add("offset")}}),[p.keepToolbarVisible,l.file]),l.error?Object(i.jsx)(E,{}):Object(i.jsxs)(i.Fragment,{children:[l.filePreviewVisible?Object(i.jsx)(w,{file:l.file,loading:l.loading,notification:x,dismissNotification:B,handleFileUpload:H,loadPreviewFile:function(){I(x),B()}}):x?Object(i.jsx)(L,{message:x,filePreferences:v,saveFileLoadModalFile:function(e){var t,n;t=x.file,n=l.file,Object(r.d)(n),u(t),$(e)},hideFileLoadModal:$,hideFileLoadMessage:B}):null,l.file&&!l.filePreviewVisible&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(y,{file:l.file,filePreferences:v,setViewerSettings:function(e,t){g({...p,[e]:t})},updateFileSavePreference:function({target:e}){const t={...v,saveLoadedFile:e.checked};var n;h(t),n=t,localStorage.setItem("file-preferences",JSON.stringify(n))},handleFileUpload:H,exitViewer:function(){t.push({pathname:"/"}),T()}}),l.loading&&Object(i.jsx)(j,{})]}),Object(i.jsx)("div",{className:"viewer offset"+("pdf"===(null===(e=l.file)||void 0===e?void 0:e.type)&&p.invertColors?" invert":""),ref:C}),Object(i.jsx)("div",{id:"js-viewer-outline",className:"viewer-outline-container"}),Object(i.jsx)("button",{id:"js-viewer-nav-previous-btn",className:"btn icon-btn viewer-navigation-btn previous",children:Object(i.jsx)(f.a,{name:"chevron-left"})}),Object(i.jsx)("button",{id:"js-viewer-nav-next-btn",className:"btn icon-btn viewer-navigation-btn next",children:Object(i.jsx)(f.a,{name:"chevron-right"})})]})}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(3);n(0);function o({name:e,title:t,size:n="20px",className:o,style:c={}}){const a={grid:"M16,5V11H21V5M10,11H15V5H10M16,18H21V12H16M10,18H15V12H10M4,18H9V12H4M4,11H9V5H4V11Z",list:"M9,5V9H21V5M9,19H21V15H9M9,14H21V10H9M4,9H8V5H4M4,19H8V15H4M4,14H8V10H4V14Z",trash:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",settings:"M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",menu:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",close:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z","dots-vertical":"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",upload:"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z","circle-cross":"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z","circle-check":"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",bookshelf:"M9 3V18H12V3H9M12 5L16 18L19 17L15 4L12 5M5 5V18H8V5H5M3 19V21H21V19H3Z",book:"M6.012,18H21V4c0-1.104-0.896-2-2-2H6C4.794,2,3,2.799,3,5v3v6v3v2c0,2.201,1.794,3,3,3h15v-2H6.012 C5.55,19.988,5,19.805,5,19S5.55,18.012,6.012,18z M8,6h9v2H8V6z","open-book":"M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z","book-question-mark":"M19,2H6A2.91,2.91,0,0,0,3,5V19a2.91,2.91,0,0,0,3,3H21V20H6a1,1,0,1,1,0-2H21V4A2,2,0,0,0,19,2ZM13.09,16h-1.8V14.2h1.8Zm2.1-6.2c-.5.6-1.3,1-1.7,1.5a2.54,2.54,0,0,0-.4,1.7h-1.8a4.52,4.52,0,0,1,.4-2.45,7.22,7.22,0,0,1,1.7-1.35c1.45-1.34,1.09-3.24-.9-3.4a1.8,1.8,0,0,0-1.8,1.8H8.89A3.6,3.6,0,0,1,12.49,4,3.48,3.48,0,0,1,15.19,9.8Z","book-check-mark":"M19,2H6A2.91,2.91,0,0,0,3,5V19a2.91,2.91,0,0,0,3,3H21V20H6a1,1,0,1,1,0-2H21V4A2,2,0,0,0,19,2ZM9.61,15.75,5,11.15,7.1,9.06l2.51,2.51,7.31-7.32L19,6.34Z","menu-down":"M7,10L12,15L17,10H7Z",reset:"M12,6V9L16,5L12,1V4A8,8 0 0,0 4,12C4,13.57 4.46,15.03 5.24,16.26L6.7,14.8C6.25,13.97 6,13 6,12A6,6 0 0,1 12,6M18.76,7.74L17.3,9.2C17.74,10.04 18,11 18,12A6,6 0 0,1 12,18V15L8,19L12,23V20A8,8 0 0,0 20,12C20,10.43 19.54,8.97 18.76,7.74Z",plus:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",minus:"M19,13H5V11H19V13Z","arrow-up":"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z","arrow-down":"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z",info:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,17H13V11H11V17Z",exit:"M19,3H5C3.89,3 3,3.89 3,5V9H5V5H19V19H5V15H3V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3M10.08,15.58L11.5,17L16.5,12L11.5,7L10.08,8.41L12.67,11H3V13H12.67L10.08,15.58Z",sort:"M3 11H15V13H3M3 18V16H21V18M3 6H9V8H3Z",search:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z","chevron-left":"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z","chevron-right":"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",page:"M17,22H7a2,2,0,0,1-2-2V4A2,2,0,0,1,7,2H17a2,2,0,0,1,2,2V20A2,2,0,0,1,17,22Z",pages:"M16,4H8A2,2,0,0,1,6,2H18A2,2,0,0,1,16,4Zm2,12V8a2,2,0,0,0-2-2H8A2,2,0,0,0,6,8v8a2,2,0,0,0,2,2h8A2,2,0,0,0,18,16Zm0,6a2,2,0,0,0-2-2H8a2,2,0,0,0-2,2H18Z",spread:"M9,19H4a2,2,0,0,1-2-2V7A2,2,0,0,1,4,5H9a2,2,0,0,1,2,2V17A2,2,0,0,1,9,19Zm13-2V7a2,2,0,0,0-2-2H15a2,2,0,0,0-2,2V17a2,2,0,0,0,2,2h5A2,2,0,0,0,22,17Z",rotate:"M16.89,15.5L18.31,16.89C19.21,15.73 19.76,14.39 19.93,13H17.91C17.77,13.87 17.43,14.72 16.89,15.5M13,17.9V19.92C14.39,19.75 15.74,19.21 16.9,18.31L15.46,16.87C14.71,17.41 13.87,17.76 13,17.9M19.93,11C19.76,9.61 19.21,8.27 18.31,7.11L16.89,8.53C17.43,9.28 17.77,10.13 17.91,11M15.55,5.55L11,1V4.07C7.06,4.56 4,7.92 4,12C4,16.08 7.05,19.44 11,19.93V17.91C8.16,17.43 6,14.97 6,12C6,9.03 8.16,6.57 11,6.09V10L15.55,5.55Z",outline:"M6 4.5A1.5 1.5 0 114.5 3 1.5 1.5 0 016 4.5zM4.5 18A1.5 1.5 0 106 19.5 1.5 1.5 0 004.5 18zm0-5A1.5 1.5 0 106 14.5 1.5 1.5 0 004.5 13zm0-5A1.5 1.5 0 106 9.5 1.5 1.5 0 004.5 8zM19 4.5A1.5 1.5 0 0017.5 3h-8A1.5 1.5 0 008 4.5 1.5 1.5 0 009.5 6h8A1.5 1.5 0 0019 4.5zm-2 5A1.5 1.5 0 0015.5 8h-6A1.5 1.5 0 008 9.5 1.5 1.5 0 009.5 11h6A1.5 1.5 0 0017 9.5zm4 5a1.5 1.5 0 00-1.5-1.5h-10A1.5 1.5 0 008 14.5 1.5 1.5 0 009.5 16h10a1.5 1.5 0 001.5-1.5zm-1 5a1.5 1.5 0 00-1.5-1.5h-9A1.5 1.5 0 008 19.5 1.5 1.5 0 009.5 21h9a1.5 1.5 0 001.5-1.5z",home:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"};return c={...c,width:n,height:n},Object(i.jsxs)("svg",{viewBox:"0 0 24 24",className:o,style:c,children:[t&&Object(i.jsx)("title",{children:t}),Object(i.jsx)("path",{d:a[e]})]})}},34:function(e,t,n){"use strict";function i(e){document.title=`${e} | ModestRead`}function o(...e){return e.join(" ").trimEnd()}function c(e,t,n=null){for(;t&&t!==n;){if(t.hasAttribute(e))return{elementRef:t,attrValue:t.getAttribute(e)};t=t.parentElement}}async function a(e){const t=await e.getPage(1),n=document.createElement("canvas");let i=t.getViewport({scale:.4});return i.width<162?i=t.getViewport({scale:64.8/i.width}):i.height>240&&(i=t.getViewport({scale:96/i.height})),n.width=i.width,n.height=i.height,await t.render({canvasContext:n.getContext("2d"),viewport:i}).promise,n.toDataURL("image/jpeg",.8)}async function r(e){const t=await Promise.all([n.e(0),n.e(3),n.e(2)]).then(n.t.bind(null,59,7)),i=await e.arrayBuffer();return t.getDocument(new Uint8Array(i)).promise}function s(e){const t={};return e.info.Title&&(t.title=e.info.Title),e.info.Author&&(t.author=e.info.Author),t}function l(e){return new Promise((t=>{const n=new Image;n.onload=()=>{const e=document.createElement("canvas"),i=e.getContext("2d");e.width=n.width,e.height=n.height,i.drawImage(n,0,0,n.width,n.height),t(e.toDataURL("image/jpeg",.8))},n.width=162,n.height=240,n.src=e}))}async function d(e){const t=await e.coverUrl();if(t)return l(t);await e.opened;for(const[n,i]of Object.entries(e.resources.urls))if(i.toLowerCase().includes("cover"))return l(e.resources.replacementUrls[n]);return new Promise((t=>{const i=document.createElement("div");i.id="area",i.classList.add("files-thumbnail-render-area"),document.body.appendChild(i);const o=e.renderTo("area",{width:684,height:980});o.display(),o.hooks.content.register((async e=>{const{default:o}=await n.e(10).then(n.t.bind(null,60,7)),c=await o(e.content,{width:684});i.remove(),c.toBlob((e=>{t(l(URL.createObjectURL(e)))}),"image/jpeg",.8)}))}))}function u(e){const t=["B","kB","MB","GB"];let n=e,i=0;for(;i<t.length&&!(n<1e3);)n/=1e3,i+=1;return n=i>0?n.toFixed(1):Math.round(n),`${n} ${t[i]}`}function m(e,t,n){for(const i of e)if(parseInt(i.getAttribute("data-page-number"),10)===t)return n(i)}function f(e,t){return m(t,e,(e=>e.getBoundingClientRect()))}function b(e,t,{keepToolbarVisible:n,scrollLeft:i=document.documentElement.scrollLeft}){m(t,e,(t=>{const o=n||1===e?40:0;window.scrollTo(i,t.offsetTop-o)}))}function v(){const e=document.createElement("div"),t=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.appendChild(t),document.body.appendChild(e);const n=e.offsetWidth-t.offsetWidth;return e.remove(),n}function h(e,t){const n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)}n.d(t,"l",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"i",(function(){return a})),n.d(t,"g",(function(){return r})),n.d(t,"j",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return f})),n.d(t,"k",(function(){return b})),n.d(t,"h",(function(){return v})),n.d(t,"b",(function(){return h}))},38:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return r}));const i=JSON.parse(localStorage.getItem("modest-read-settings"))||{sortBy:"last-accessed",sortOrder:1,showCategories:!1,layoutType:"grid",invertColors:!1,keepToolbarVisible:!1};function o(){return i}function c(e){return i[e]}function a(e){Object.assign(i,e),s()}function r(e,t){i[e]=t,s()}function s(){localStorage.setItem("modest-read-settings",JSON.stringify(i))}},39:function(e,t,n){"use strict";var i=n(3),o=(n(0),n.p+"static/media/icon-text.8d796bce.svg");n(41);t.a=function(){return Object(i.jsx)("img",{src:o,className:"banner-image",alt:""})}},40:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return d}));var i=n(46);const o=new i.a("ModestKeep","files");function c(e){return Object(i.d)(o).then((e=>Promise.all(e.map(a)))).then((t=>e?d(t,e):t)).catch((e=>(console.log(e),[])))}function a(e){return Object(i.c)(e,o)}function r(e){Object(i.e)(e.id,e,o)}function s(e){return Object(i.b)(e,o).then((()=>!0))}function l(e,t){return"last-accessed"===e?Math.max(t.accessedAt||0,t.createdAt):"file-size"===e?t.size:"file-name"===e?t.name.toLowerCase().replace(/[^\w\s]/gi,""):void 0}function d(e,{sortBy:t,sortOrder:n}){return"last-accessed"===t?function(e,t,n){const[i,o]=e.reduce(((e,t)=>("reading"===t.status?e[0].push(t):e[1].push(t),e)),[[],[]]);return u(i,t,n).concat(u(o,t,n))}(e,t,-n):u(e,t,n)}function u(e,t,n){return[...e].sort(((e,i)=>{const o=l(t,e),c=l(t,i);return o<c?-n:o>c?n:0}))}},41:function(e,t,n){},43:function(e,t,n){"use strict";var i=n(3),o=n(0),c=(n(51),n(138)),a=n(34);t.a=function({container:e,toggle:t,body:n,children:r}){const[s,l]=Object(o.useState)({id:Object(c.a)()}),d=Object(o.useCallback)((function({target:e}){const t=e.closest(".dropdown-container");let n=!0;(null===t||void 0===t?void 0:t.id)===s.id&&(n=!e.closest("[data-dropdown-keep]")&&(e.closest("a")||e.closest(".dropdown-btn")));n&&(u.current&&l({id:s.id,visible:!1,reveal:!1}),window.removeEventListener("click",d))}),[s.id]),u=Object(o.useRef)(!1),m=Object(o.useRef)(null);return Object(o.useEffect)((()=>(u.current=!0,()=>{u.current=!1,window.removeEventListener("click",d)})),[d]),Object(o.useEffect)((()=>{if(s.reveal){const e=document.documentElement.offsetHeight,t=m.current.getBoundingClientRect().height;l({...s,onTop:s.top+t>e,visible:!0}),Object(a.b)("dropdown-visible",{id:s.id,hide:()=>l({id:s.id,visible:!1,reveal:!1})})}}),[s.reveal]),Object(i.jsxs)("div",{id:s.id,className:"dropdown-container"+(e?` ${e.className}`:""),children:[Object(i.jsx)("button",{onClick:function({currentTarget:e}){let t=0;s.visible?window.removeEventListener("click",d):(window.addEventListener("click",d),t=e.getBoundingClientRect().bottom),l({id:s.id,visible:!1,reveal:!s.visible,top:t,onTop:!1})},title:t.title,className:`${t.className}${s.visible?" active":""}`,children:t.content}),Object(i.jsx)("div",{ref:m,className:`dropdown${n?` ${n.className}`:""}${s.reveal?" reveal":""}${s.visible?" visible":""}${s.onTop?" top":""}`,children:r})]})}},44:function(e,t,n){"use strict";var i=n(3),o=n(0),c=(n(52),n(34)),a=n(32);t.a=function({notification:e,expandable:t,className:n="",margin:r,children:s,dismiss:l}){const[d,u]=Object(o.useState)(e),[m,f]=Object(o.useState)(!1),b=e.type||"negative";return Object(o.useEffect)((()=>{if(!d.flashing&&d!==e){if(d.value!==e.value)return void u(e);u({...d,flashing:!0}),setTimeout((()=>{u(e)}),640)}}),[d,e]),Object(i.jsxs)("div",{className:Object(c.a)("notification",n,b,r?`margin-${r}`:"",m?"expanded":"",d.flashing?"flash":""),children:[Object(i.jsx)(a.a,{name:"negative"===b?"circle-cross":"circle-check",className:"notification-icon",size:"24px"}),t?Object(i.jsxs)("div",{className:"notification-expandable-content-container",children:[Object(i.jsxs)("div",{className:"notification-expandable-content",children:[Object(i.jsx)("span",{children:e.value}),Object(i.jsx)("button",{className:"btn icon-btn notification-btn notification-expand-btn",onClick:function(){f(!m)},title:"Details",style:{transform:`rotateZ(${m?"180deg":"0"})`},children:Object(i.jsx)(a.a,{name:"menu-down"})})]}),m&&s]}):Object(i.jsx)("span",{className:"notification-text",children:d.value}),Object(i.jsx)("button",{type:"button",className:"btn icon-btn notification-btn notification-dismiss-btn",onClick:l,title:"Dismiss",children:Object(i.jsx)(a.a,{name:"close"})})]})}},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l}));class i{constructor(e="keyval-store",t="keyval"){this.storeName=t,this._dbp=new Promise(((n,i)=>{const o=indexedDB.open(e,1);o.onerror=()=>i(o.error),o.onsuccess=()=>n(o.result),o.onupgradeneeded=()=>{o.result.createObjectStore(t)}}))}_withIDBStore(e,t){return this._dbp.then((n=>new Promise(((i,o)=>{const c=n.transaction(this.storeName,e);c.oncomplete=()=>i(),c.onabort=c.onerror=()=>o(c.error),t(c.objectStore(this.storeName))}))))}}let o;function c(){return o||(o=new i),o}function a(e,t=c()){let n;return t._withIDBStore("readonly",(t=>{n=t.get(e)})).then((()=>n.result))}function r(e,t,n=c()){return n._withIDBStore("readwrite",(n=>{n.put(t,e)}))}function s(e,t=c()){return t._withIDBStore("readwrite",(t=>{t.delete(e)}))}function l(e=c()){const t=[];return e._withIDBStore("readonly",(e=>{(e.openKeyCursor||e.openCursor).call(e).onsuccess=function(){this.result&&(t.push(this.result.key),this.result.continue())}})).then((()=>t))}},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},63:function(e,t,n){"use strict";var i=n(3),o=(n(0),n(13));n(53);t.a=function({file:e,showLink:t,children:n}){return Object(i.jsxs)("li",{className:"file-card",children:[t?Object(i.jsx)(o.b,{to:`/viewer/${e.id}`,className:"file-card-left",title:`Open ${e.name}`,children:Object(i.jsx)("img",{src:e.coverImage,className:"file-card-image",alt:""})}):Object(i.jsx)("div",{className:"file-card-left",children:Object(i.jsx)("img",{src:e.coverImage,className:"file-card-image",alt:""})}),Object(i.jsxs)("div",{className:"file-card-info",children:[Object(i.jsx)("div",{className:"file-card-title",children:e.title||e.name}),e.author&&Object(i.jsx)("div",{className:"file-card-author",children:e.author}),Object(i.jsxs)("div",{className:"file-card-secondary-info",children:[e.title&&Object(i.jsx)("div",{className:"file-card-secondary-info-item file-card-filename",children:e.name}),Object(i.jsx)("div",{className:"file-card-secondary-info-item",children:e.sizeString})]}),Object(i.jsx)("div",{className:"file-card-progress-container",title:`${e.pageNumber} of ${e.pageCount} page${1===e.pageCount?"":"s"} read`,children:Object(i.jsx)("div",{className:"file-card-progress",children:Object(i.jsx)("div",{className:"file-card-progress-bar",style:{left:(e.pageNumber-1)/e.pageCount*100+"%"}})})}),Object(i.jsx)("div",{className:"file-card-bottom",children:n})]})]})}},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){}}]);